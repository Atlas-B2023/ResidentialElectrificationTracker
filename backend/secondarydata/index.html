
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://atlas-b2023.github.io/ResidentialElectrificationTracker/backend/secondarydata/">
      
      
        <link rel="prev" href="../redfinscraper/">
      
      
        <link rel="next" href="../us/states/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.7">
    
    
      
        <title>Secondarydata - Heating Tracker Backend Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#backend.secondarydata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Heating Tracker Backend Docs" class="md-header__button md-logo" aria-label="Heating Tracker Backend Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Heating Tracker Backend Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Secondarydata
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Atlas-B2023/ResidentialElectrificationTracker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Heating Tracker Backend Docs" class="md-nav__button md-logo" aria-label="Heating Tracker Backend Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Heating Tracker Backend Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Atlas-B2023/ResidentialElectrificationTracker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Backend
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Backend
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../helper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../redfinscraper/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redfinscraper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Secondarydata
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Secondarydata
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#backend.secondarydata" class="md-nav__link">
    secondarydata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever" class="md-nav__link">
    CensusDataRetriever
  </a>
  
    <nav class="md-nav" aria-label="CensusDataRetriever">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_acs5_profile_table_group_for_zcta_by_year" class="md-nav__link">
    get_acs5_profile_table_group_for_zcta_by_year()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_acs5_profile_table_to_group_name" class="md-nav__link">
    get_acs5_profile_table_to_group_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_acs5_subject_table_group_for_zcta_by_year" class="md-nav__link">
    get_acs5_subject_table_group_for_zcta_by_year()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_acs5_subject_table_to_group_name" class="md-nav__link">
    get_acs5_subject_table_to_group_name()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_and_cache_data" class="md-nav__link">
    get_and_cache_data()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.get_race_makeup_by_zcta" class="md-nav__link">
    get_race_makeup_by_zcta()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list" class="md-nav__link">
    translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.CensusDataRetriever.translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list" class="md-nav__link">
    translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever" class="md-nav__link">
    EIADataRetriever
  </a>
  
    <nav class="md-nav" aria-label="EIADataRetriever">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.HeaterEfficiencies" class="md-nav__link">
    HeaterEfficiencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_electricity_price_per_kwh" class="md-nav__link">
    monthly_electricity_price_per_kwh()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_heating_season_heating_oil_price_per_gal" class="md-nav__link">
    monthly_heating_season_heating_oil_price_per_gal()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_heating_season_propane_price_per_gal" class="md-nav__link">
    monthly_heating_season_propane_price_per_gal()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_ng_price_per_mcf" class="md-nav__link">
    monthly_ng_price_per_mcf()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_price_per_mbtu_by_energy_type" class="md-nav__link">
    monthly_price_per_mbtu_by_energy_type()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.monthly_price_per_mbtu_by_energy_type_by_state" class="md-nav__link">
    monthly_price_per_mbtu_by_energy_type_by_state()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.price_df_to_clean_dict" class="md-nav__link">
    price_df_to_clean_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.price_dict_to_clean_dict" class="md-nav__link">
    price_dict_to_clean_dict()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.price_per_mbtu_with_efficiency" class="md-nav__link">
    price_per_mbtu_with_efficiency()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backend.secondarydata.EIADataRetriever.price_to_clean_dict" class="md-nav__link">
    price_to_clean_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Us
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Us
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../us/states/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    States
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../us/unitedstatesofamerica/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unitedstatesofamerica
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gui
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Gui
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/datapage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Datapage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/filterspage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Filterspage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../gui/searchpage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Searchpage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Secondarydata</h1>

<div class="doc doc-object doc-module">



<a id="backend.secondarydata"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="backend.secondarydata.CensusDataRetriever" class="doc doc-heading">
          <code>CensusDataRetriever</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Interact with the Census data API.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>ACS5 paths can be found here: https://api.census.gov/data/2019/acs/acs5.html</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-654">654</a></span>
<span class="normal"><a href="#__codelineno-0-655">655</a></span>
<span class="normal"><a href="#__codelineno-0-656">656</a></span>
<span class="normal"><a href="#__codelineno-0-657">657</a></span>
<span class="normal"><a href="#__codelineno-0-658">658</a></span>
<span class="normal"><a href="#__codelineno-0-659">659</a></span>
<span class="normal"><a href="#__codelineno-0-660">660</a></span>
<span class="normal"><a href="#__codelineno-0-661">661</a></span>
<span class="normal"><a href="#__codelineno-0-662">662</a></span>
<span class="normal"><a href="#__codelineno-0-663">663</a></span>
<span class="normal"><a href="#__codelineno-0-664">664</a></span>
<span class="normal"><a href="#__codelineno-0-665">665</a></span>
<span class="normal"><a href="#__codelineno-0-666">666</a></span>
<span class="normal"><a href="#__codelineno-0-667">667</a></span>
<span class="normal"><a href="#__codelineno-0-668">668</a></span>
<span class="normal"><a href="#__codelineno-0-669">669</a></span>
<span class="normal"><a href="#__codelineno-0-670">670</a></span>
<span class="normal"><a href="#__codelineno-0-671">671</a></span>
<span class="normal"><a href="#__codelineno-0-672">672</a></span>
<span class="normal"><a href="#__codelineno-0-673">673</a></span>
<span class="normal"><a href="#__codelineno-0-674">674</a></span>
<span class="normal"><a href="#__codelineno-0-675">675</a></span>
<span class="normal"><a href="#__codelineno-0-676">676</a></span>
<span class="normal"><a href="#__codelineno-0-677">677</a></span>
<span class="normal"><a href="#__codelineno-0-678">678</a></span>
<span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span>
<span class="normal"><a href="#__codelineno-0-714">714</a></span>
<span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span>
<span class="normal"><a href="#__codelineno-0-734">734</a></span>
<span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span>
<span class="normal"><a href="#__codelineno-0-776">776</a></span>
<span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span>
<span class="normal"><a href="#__codelineno-0-823">823</a></span>
<span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span>
<span class="normal"><a href="#__codelineno-0-872">872</a></span>
<span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span>
<span class="normal"><a href="#__codelineno-0-909">909</a></span>
<span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span>
<span class="normal"><a href="#__codelineno-0-953">953</a></span>
<span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span>
<span class="normal"><a href="#__codelineno-0-973">973</a></span>
<span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span>
<span class="normal"><a href="#__codelineno-0-978">978</a></span>
<span class="normal"><a href="#__codelineno-0-979">979</a></span>
<span class="normal"><a href="#__codelineno-0-980">980</a></span>
<span class="normal"><a href="#__codelineno-0-981">981</a></span>
<span class="normal"><a href="#__codelineno-0-982">982</a></span>
<span class="normal"><a href="#__codelineno-0-983">983</a></span>
<span class="normal"><a href="#__codelineno-0-984">984</a></span>
<span class="normal"><a href="#__codelineno-0-985">985</a></span>
<span class="normal"><a href="#__codelineno-0-986">986</a></span>
<span class="normal"><a href="#__codelineno-0-987">987</a></span>
<span class="normal"><a href="#__codelineno-0-988">988</a></span>
<span class="normal"><a href="#__codelineno-0-989">989</a></span>
<span class="normal"><a href="#__codelineno-0-990">990</a></span>
<span class="normal"><a href="#__codelineno-0-991">991</a></span>
<span class="normal"><a href="#__codelineno-0-992">992</a></span>
<span class="normal"><a href="#__codelineno-0-993">993</a></span>
<span class="normal"><a href="#__codelineno-0-994">994</a></span>
<span class="normal"><a href="#__codelineno-0-995">995</a></span>
<span class="normal"><a href="#__codelineno-0-996">996</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-654" name="__codelineno-0-654"></a><span class="k">class</span> <span class="nc">CensusDataRetriever</span><span class="p">:</span>
<a id="__codelineno-0-655" name="__codelineno-0-655"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interact with the Census data API.</span>
<a id="__codelineno-0-656" name="__codelineno-0-656"></a>
<a id="__codelineno-0-657" name="__codelineno-0-657"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-658" name="__codelineno-0-658"></a><span class="sd">        ACS5 paths can be found here: https://api.census.gov/data/2019/acs/acs5.html&quot;&quot;&quot;</span>
<a id="__codelineno-0-659" name="__codelineno-0-659"></a>
<a id="__codelineno-0-660" name="__codelineno-0-660"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-661" name="__codelineno-0-661"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">base_url</span> <span class="o">=</span> <span class="s2">&quot;https://data.census.gov/&quot;</span>
<a id="__codelineno-0-662" name="__codelineno-0-662"></a>        <span class="c1"># https://api.census.gov/data/2021/acs/acs5/profile/variables.html</span>
<a id="__codelineno-0-663" name="__codelineno-0-663"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;CENSUS_API_KEY&quot;</span><span class="p">)</span>
<a id="__codelineno-0-664" name="__codelineno-0-664"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-665" name="__codelineno-0-665"></a>            <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-666" name="__codelineno-0-666"></a>                <span class="s2">&quot;No Census API key found in a .env file in project directory. please request a key at https://api.census.gov/data/key_signup.html&quot;</span><span class="p">,</span>
<a id="__codelineno-0-667" name="__codelineno-0-667"></a>                <span class="s2">&quot;critical&quot;</span><span class="p">,</span>
<a id="__codelineno-0-668" name="__codelineno-0-668"></a>            <span class="p">)</span>
<a id="__codelineno-0-669" name="__codelineno-0-669"></a>            <span class="n">exit</span><span class="p">()</span>
<a id="__codelineno-0-670" name="__codelineno-0-670"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">MAX_COL_NAME_LENGTH</span> <span class="o">=</span> <span class="mi">80</span>
<a id="__codelineno-0-671" name="__codelineno-0-671"></a>
<a id="__codelineno-0-672" name="__codelineno-0-672"></a>    <span class="k">def</span> <span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-673" name="__codelineno-0-673"></a>        <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">65</span><span class="p">)</span>
<a id="__codelineno-0-674" name="__codelineno-0-674"></a>        <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">400</span><span class="p">:</span>
<a id="__codelineno-0-675" name="__codelineno-0-675"></a>            <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown variable </span><span class="si">{</span><span class="n">r</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;variable &quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">)</span>
<a id="__codelineno-0-676" name="__codelineno-0-676"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-677" name="__codelineno-0-677"></a>        <span class="k">return</span> <span class="n">r</span>
<a id="__codelineno-0-678" name="__codelineno-0-678"></a>
<a id="__codelineno-0-679" name="__codelineno-0-679"></a>    <span class="k">def</span> <span class="nf">get_and_cache_data</span><span class="p">(</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url_to_lookup_on_miss</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cache files.</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">            file_name (str): file name to save/lookup</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">            url_to_lookup_on_miss (str): the Census url to lookup</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">            bool | dict[str, str] | None | Any: the dict of `tablename: label` or</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>        <span class="n">CENSUS_DATA_DIR_PATH</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>        <span class="n">my_json</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>        <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>                    <span class="n">my_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>                <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>                    <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not decode cached file&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>                    <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>            <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url_to_lookup_on_miss</span><span class="p">)</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>            <span class="k">if</span> <span class="n">req</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>                <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find census file </span><span class="si">{</span><span class="n">req</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>                <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>            <span class="n">req</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>            <span class="n">my_json</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_json</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>        <span class="k">return</span> <span class="n">my_json</span>
<a id="__codelineno-0-714" name="__codelineno-0-714"></a>
<a id="__codelineno-0-715" name="__codelineno-0-715"></a>    <span class="k">def</span> <span class="nf">get_race_makeup_by_zcta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zcta</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get race make up by zcta from. DO NOT USE</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">            use `get_table_group_for_zcta_by_state_by_year`</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">            zcta (str): zcta</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">            str | None: text or none</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>        <span class="c1"># get white, black, american indian/native alaskan, asian, NH/PI, other. note that these are estimates, margin of error can be had with &quot;M&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>        <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>            <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/2021/acs/acs5/profile?get=DP05_0064E,DP05_0065E,DP05_0066E,DP05_0067E,DP05_0068E,DP05_0069E&amp;for=zip%20code%20tabulation%20area:</span><span class="si">{</span><span class="n">zcta</span><span class="si">}</span><span class="s2">&amp;key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>        <span class="p">)</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>        <span class="k">if</span> <span class="n">req</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>        <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span>
<a id="__codelineno-0-734" name="__codelineno-0-734"></a>
<a id="__codelineno-0-735" name="__codelineno-0-735"></a>    <span class="k">def</span> <span class="nf">get_acs5_profile_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a JSON representation of a table&#39;s attributes.</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a><span class="sd">            Tables must be:</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">                * DP02</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="sd">                * DP02PR</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">                * DP03</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">                * DP04</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="sd">                * DP05</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">            Returned object will have entries similar to:</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">            ```json</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">            &quot;DP05_0037M&quot;: {</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="sd">                &quot;label&quot;: &quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;,</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">                &quot;concept&quot;: &quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;,</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">                &quot;predicateType&quot;: &quot;int&quot;,</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="sd">                &quot;group&quot;: &quot;DP05&quot;,</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="sd">                &quot;limit&quot;: 0,</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a><span class="sd">                &quot;predicateOnly&quot;: true</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a><span class="sd">            }</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="sd">            ```</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a><span class="sd">            table (str): the table to lookup</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="sd">            year (str): which acs5 year to look up</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">            str | Any: json object</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs5-profile-groups-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>        <span class="n">groups_url</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>            <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/profile/groups/</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>        <span class="p">)</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>        <span class="n">groups_to_label_translation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">groups_url</span><span class="p">)</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>        <span class="k">if</span> <span class="n">groups_to_label_translation</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a>            <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Something is wrong with groups label dict&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>        <span class="k">return</span> <span class="n">groups_to_label_translation</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-776" name="__codelineno-0-776"></a>
<a id="__codelineno-0-777" name="__codelineno-0-777"></a>    <span class="k">def</span> <span class="nf">translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the label name for a table and row for the acs5 profile surveys.</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">            headers (list[str]): header row</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">            table (str): have to look again</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">            year (str): the year</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">            None: translates the list of table_row_selector to its english label</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>        <span class="c1"># is going to read the file multiple times, save last req as {&quot;table&quot;: req_json[table]...} for this?</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>        <span class="n">groups_to_label_translation_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acs5_profile_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>            <span class="n">table</span><span class="p">,</span> <span class="n">year</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>        <span class="p">)</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>        <span class="k">if</span> <span class="n">groups_to_label_translation_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>            <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate headers&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>            <span class="k">return</span> <span class="n">groups_to_label_translation_dict</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>            <span class="n">new_col_name_dict</span> <span class="o">=</span> <span class="n">groups_to_label_translation_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>            <span class="k">if</span> <span class="n">new_col_name_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>                <span class="c1"># returns none if not in dict, means we have custom name and can continue</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>                <span class="k">continue</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name_dict</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>            <span class="c1"># qgis doesnt allow field names of 80+ chars. massage into form, then cut off</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>            <span class="c1"># delimiter for table subsection</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;!!&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>            <span class="c1"># easier to read</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>            <span class="n">new_col_name_parts</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>            <span class="k">for</span> <span class="n">idy</span><span class="p">,</span> <span class="n">no_format</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">):</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>                <span class="n">new_col_name_parts</span><span class="p">[</span><span class="n">idy</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_format</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">)</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>            <span class="c1"># shortenings to fit length requirement</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">replace_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>                <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>            <span class="c1"># limiter</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="p">[</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>                <span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_col_name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_COL_NAME_LENGTH</span><span class="p">)</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>            <span class="p">]</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>            <span class="k">if</span> <span class="n">new_col_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[:</span><span class="n">idx</span><span class="p">]:</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>                <span class="n">headers</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_col_name</span>
<a id="__codelineno-0-823" name="__codelineno-0-823"></a>
<a id="__codelineno-0-824" name="__codelineno-0-824"></a>    <span class="k">def</span> <span class="nf">get_acs5_profile_table_group_for_zcta_by_year</span><span class="p">(</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;CSV output of an acs 5 year profile survey table.</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">        TODO:</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">            Update func name</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">            table (str): census demo acs5 table</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">            year (str): year to search</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">            str: file path where output is saved</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs-profile-table-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/profile?get=group(</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">)&amp;for=zip%20code%20tabulation%20area:*&quot;</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>        <span class="n">list_of_list_table_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>        <span class="k">if</span> <span class="n">list_of_list_table_json</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>            <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>                <span class="sa">f</span><span class="s2">&quot;Could not load table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">. Perhaps the api is down or there was an error saving/reading the file.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>                <span class="s2">&quot;warn&quot;</span><span class="p">,</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>            <span class="p">)</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>            <span class="n">list_of_list_table_json</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>            <span class="n">table</span><span class="p">,</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>            <span class="n">year</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>        <span class="p">)</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">list_of_list_table_json</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>        <span class="c1"># funky stuff to get the first list to be the name of the columns</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>            <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>            <span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>            <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">&quot;(?i)^(ann)&quot;</span><span class="p">),</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(?i)</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;zip code tabulation area&quot;</span><span class="p">:</span> <span class="s2">&quot;ZCTA&quot;</span><span class="p">})</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>            <span class="o">.</span><span class="n">cast</span><span class="p">(</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>                <span class="p">{</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>                    <span class="s2">&quot;ZCTA&quot;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int32</span><span class="p">,</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>                <span class="p">}</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a>            <span class="p">)</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>        <span class="p">)</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="s2">&quot;acs5-profile-group-</span><span class="si">{table}</span><span class="s2">-zcta.csv&quot;</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>        <span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-872" name="__codelineno-0-872"></a>
<a id="__codelineno-0-873" name="__codelineno-0-873"></a>    <span class="k">def</span> <span class="nf">get_acs5_subject_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a JSON representation of a table&#39;s attributes.</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">            Tables can be found at: https://www.census.gov/acs/www/data/data-tables-and-tools/subject-tables/</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">            Returned object will have entries similar to:</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">            ```json</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="sd">            &quot;DP05_0037M&quot;: {</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">                &quot;label&quot;: &quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;,</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">                &quot;concept&quot;: &quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;,</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">                &quot;predicateType&quot;: &quot;int&quot;,</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">                &quot;group&quot;: &quot;DP05&quot;,</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">                &quot;limit&quot;: 0,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">                &quot;predicateOnly&quot;: true</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">            }</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">            ```</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">            table (str): the table to lookup</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">            year (str): which acs5 year to look up</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">            str | Any: variables</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs5-subject-groups-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>        <span class="n">groups_url</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>            <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/subject/groups/</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>        <span class="p">)</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>        <span class="n">groups_to_label_translation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">groups_url</span><span class="p">)</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>        <span class="k">if</span> <span class="n">groups_to_label_translation</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>            <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Something is wrong with groups label dict&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>            <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>        <span class="k">return</span> <span class="n">groups_to_label_translation</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-909" name="__codelineno-0-909"></a>
<a id="__codelineno-0-910" name="__codelineno-0-910"></a>    <span class="k">def</span> <span class="nf">translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the label name for a table and row for the acs5 profile surveys.</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">            headers (list[str]): headers</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">            table (str): table</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">            year (str): year</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>        <span class="c1"># is going to read the file multiple times, save last req as {&quot;table&quot;: req_json[table]...} for this?</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>        <span class="n">groups_to_label_translation_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acs5_subject_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>            <span class="n">table</span><span class="p">,</span> <span class="n">year</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>        <span class="p">)</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>        <span class="k">if</span> <span class="n">groups_to_label_translation_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>            <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate headers&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>            <span class="k">return</span> <span class="n">groups_to_label_translation_dict</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a>        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>            <span class="n">new_col_name_dict</span> <span class="o">=</span> <span class="n">groups_to_label_translation_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a>            <span class="k">if</span> <span class="n">new_col_name_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>                <span class="c1"># returns none if not in dict, means we have custom name and can continue</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>                <span class="k">continue</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name_dict</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>            <span class="c1"># qgis doesnt allow field names of 80+ chars. massage into form, then cut off</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>            <span class="c1"># delimiter for table subsection</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;!!&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>            <span class="c1"># easier to read</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a>            <span class="n">new_col_name_parts</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a>            <span class="k">for</span> <span class="n">idy</span><span class="p">,</span> <span class="n">no_format</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">):</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>                <span class="n">new_col_name_parts</span><span class="p">[</span><span class="n">idy</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_format</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">)</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>            <span class="c1"># shortenings to fit length requirement</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">replace_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>                <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>            <span class="c1"># limiter</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="p">[</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>                <span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_col_name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_COL_NAME_LENGTH</span><span class="p">)</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>            <span class="p">]</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>            <span class="k">if</span> <span class="n">new_col_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[:</span><span class="n">idx</span><span class="p">]:</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>                <span class="n">headers</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_col_name</span>
<a id="__codelineno-0-953" name="__codelineno-0-953"></a>
<a id="__codelineno-0-954" name="__codelineno-0-954"></a>    <span class="k">def</span> <span class="nf">get_acs5_subject_table_group_for_zcta_by_year</span><span class="p">(</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;CSV output of a acs 5 year subject survey table</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">            table (str): census acs5 table</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">            year (str): year to search</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>        <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs-subject-table-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/subject?get=group(</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">)&amp;for=zip%20code%20tabulation%20area:*&quot;</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>        <span class="n">list_of_list_table_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>        <span class="k">if</span> <span class="n">list_of_list_table_json</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>            <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>                <span class="sa">f</span><span class="s2">&quot;Could not load table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">. Perhaps the api is down or there was an error saving/reading the file.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>                <span class="s2">&quot;warn&quot;</span><span class="p">,</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>            <span class="p">)</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>            <span class="n">list_of_list_table_json</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>            <span class="n">table</span><span class="p">,</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>            <span class="n">year</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>        <span class="p">)</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">list_of_list_table_json</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>        <span class="c1"># funky stuff to get the first list to be the name of the columns</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>        <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>            <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>            <span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>            <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">&quot;(?i)^(ann)&quot;</span><span class="p">),</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(?i)</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>            <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;zip code tabulation area&quot;</span><span class="p">:</span> <span class="s2">&quot;ZCTA&quot;</span><span class="p">})</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a>            <span class="o">.</span><span class="n">cast</span><span class="p">(</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>                <span class="p">{</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>                    <span class="s2">&quot;ZCTA&quot;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int32</span><span class="p">,</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>                <span class="p">}</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>            <span class="p">)</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>        <span class="p">)</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>        <span class="n">file_path</span> <span class="o">=</span> <span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="s2">&quot;acs5-subject-group-</span><span class="si">{table}</span><span class="s2">-zcta.csv&quot;</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>        <span class="c1"># may not have to write. but cache func doesn&#39;t return whether it hits or not</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>        <span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_acs5_profile_table_group_for_zcta_by_year" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_acs5_profile_table_group_for_zcta_by_year</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>CSV output of an acs 5 year profile survey table.</p>

<details class="todo" open>
  <summary>TODO</summary>
  <p>Update func name</p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>census demo acs5 table</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>year to search</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>str</code></td>          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>file path where output is saved</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-824">824</a></span>
<span class="normal"><a href="#__codelineno-0-825">825</a></span>
<span class="normal"><a href="#__codelineno-0-826">826</a></span>
<span class="normal"><a href="#__codelineno-0-827">827</a></span>
<span class="normal"><a href="#__codelineno-0-828">828</a></span>
<span class="normal"><a href="#__codelineno-0-829">829</a></span>
<span class="normal"><a href="#__codelineno-0-830">830</a></span>
<span class="normal"><a href="#__codelineno-0-831">831</a></span>
<span class="normal"><a href="#__codelineno-0-832">832</a></span>
<span class="normal"><a href="#__codelineno-0-833">833</a></span>
<span class="normal"><a href="#__codelineno-0-834">834</a></span>
<span class="normal"><a href="#__codelineno-0-835">835</a></span>
<span class="normal"><a href="#__codelineno-0-836">836</a></span>
<span class="normal"><a href="#__codelineno-0-837">837</a></span>
<span class="normal"><a href="#__codelineno-0-838">838</a></span>
<span class="normal"><a href="#__codelineno-0-839">839</a></span>
<span class="normal"><a href="#__codelineno-0-840">840</a></span>
<span class="normal"><a href="#__codelineno-0-841">841</a></span>
<span class="normal"><a href="#__codelineno-0-842">842</a></span>
<span class="normal"><a href="#__codelineno-0-843">843</a></span>
<span class="normal"><a href="#__codelineno-0-844">844</a></span>
<span class="normal"><a href="#__codelineno-0-845">845</a></span>
<span class="normal"><a href="#__codelineno-0-846">846</a></span>
<span class="normal"><a href="#__codelineno-0-847">847</a></span>
<span class="normal"><a href="#__codelineno-0-848">848</a></span>
<span class="normal"><a href="#__codelineno-0-849">849</a></span>
<span class="normal"><a href="#__codelineno-0-850">850</a></span>
<span class="normal"><a href="#__codelineno-0-851">851</a></span>
<span class="normal"><a href="#__codelineno-0-852">852</a></span>
<span class="normal"><a href="#__codelineno-0-853">853</a></span>
<span class="normal"><a href="#__codelineno-0-854">854</a></span>
<span class="normal"><a href="#__codelineno-0-855">855</a></span>
<span class="normal"><a href="#__codelineno-0-856">856</a></span>
<span class="normal"><a href="#__codelineno-0-857">857</a></span>
<span class="normal"><a href="#__codelineno-0-858">858</a></span>
<span class="normal"><a href="#__codelineno-0-859">859</a></span>
<span class="normal"><a href="#__codelineno-0-860">860</a></span>
<span class="normal"><a href="#__codelineno-0-861">861</a></span>
<span class="normal"><a href="#__codelineno-0-862">862</a></span>
<span class="normal"><a href="#__codelineno-0-863">863</a></span>
<span class="normal"><a href="#__codelineno-0-864">864</a></span>
<span class="normal"><a href="#__codelineno-0-865">865</a></span>
<span class="normal"><a href="#__codelineno-0-866">866</a></span>
<span class="normal"><a href="#__codelineno-0-867">867</a></span>
<span class="normal"><a href="#__codelineno-0-868">868</a></span>
<span class="normal"><a href="#__codelineno-0-869">869</a></span>
<span class="normal"><a href="#__codelineno-0-870">870</a></span>
<span class="normal"><a href="#__codelineno-0-871">871</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-824" name="__codelineno-0-824"></a><span class="k">def</span> <span class="nf">get_acs5_profile_table_group_for_zcta_by_year</span><span class="p">(</span>
<a id="__codelineno-0-825" name="__codelineno-0-825"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-826" name="__codelineno-0-826"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-827" name="__codelineno-0-827"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;CSV output of an acs 5 year profile survey table.</span>
<a id="__codelineno-0-828" name="__codelineno-0-828"></a>
<a id="__codelineno-0-829" name="__codelineno-0-829"></a><span class="sd">    TODO:</span>
<a id="__codelineno-0-830" name="__codelineno-0-830"></a><span class="sd">        Update func name</span>
<a id="__codelineno-0-831" name="__codelineno-0-831"></a>
<a id="__codelineno-0-832" name="__codelineno-0-832"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-833" name="__codelineno-0-833"></a><span class="sd">        table (str): census demo acs5 table</span>
<a id="__codelineno-0-834" name="__codelineno-0-834"></a><span class="sd">        year (str): year to search</span>
<a id="__codelineno-0-835" name="__codelineno-0-835"></a>
<a id="__codelineno-0-836" name="__codelineno-0-836"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-837" name="__codelineno-0-837"></a><span class="sd">        str: file path where output is saved</span>
<a id="__codelineno-0-838" name="__codelineno-0-838"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-839" name="__codelineno-0-839"></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs-profile-table-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-840" name="__codelineno-0-840"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/profile?get=group(</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">)&amp;for=zip%20code%20tabulation%20area:*&quot;</span>
<a id="__codelineno-0-841" name="__codelineno-0-841"></a>    <span class="n">list_of_list_table_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-842" name="__codelineno-0-842"></a>
<a id="__codelineno-0-843" name="__codelineno-0-843"></a>    <span class="k">if</span> <span class="n">list_of_list_table_json</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-844" name="__codelineno-0-844"></a>        <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-845" name="__codelineno-0-845"></a>            <span class="sa">f</span><span class="s2">&quot;Could not load table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">. Perhaps the api is down or there was an error saving/reading the file.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-846" name="__codelineno-0-846"></a>            <span class="s2">&quot;warn&quot;</span><span class="p">,</span>
<a id="__codelineno-0-847" name="__codelineno-0-847"></a>        <span class="p">)</span>
<a id="__codelineno-0-848" name="__codelineno-0-848"></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-849" name="__codelineno-0-849"></a>
<a id="__codelineno-0-850" name="__codelineno-0-850"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-851" name="__codelineno-0-851"></a>        <span class="n">list_of_list_table_json</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-852" name="__codelineno-0-852"></a>        <span class="n">table</span><span class="p">,</span>
<a id="__codelineno-0-853" name="__codelineno-0-853"></a>        <span class="n">year</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-854" name="__codelineno-0-854"></a>    <span class="p">)</span>
<a id="__codelineno-0-855" name="__codelineno-0-855"></a>
<a id="__codelineno-0-856" name="__codelineno-0-856"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">list_of_list_table_json</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
<a id="__codelineno-0-857" name="__codelineno-0-857"></a>    <span class="c1"># funky stuff to get the first list to be the name of the columns</span>
<a id="__codelineno-0-858" name="__codelineno-0-858"></a>    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-859" name="__codelineno-0-859"></a>        <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<a id="__codelineno-0-860" name="__codelineno-0-860"></a>        <span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-861" name="__codelineno-0-861"></a>        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">&quot;(?i)^(ann)&quot;</span><span class="p">),</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(?i)</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-862" name="__codelineno-0-862"></a>        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;zip code tabulation area&quot;</span><span class="p">:</span> <span class="s2">&quot;ZCTA&quot;</span><span class="p">})</span>
<a id="__codelineno-0-863" name="__codelineno-0-863"></a>        <span class="o">.</span><span class="n">cast</span><span class="p">(</span>
<a id="__codelineno-0-864" name="__codelineno-0-864"></a>            <span class="p">{</span>
<a id="__codelineno-0-865" name="__codelineno-0-865"></a>                <span class="s2">&quot;ZCTA&quot;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int32</span><span class="p">,</span>
<a id="__codelineno-0-866" name="__codelineno-0-866"></a>            <span class="p">}</span>
<a id="__codelineno-0-867" name="__codelineno-0-867"></a>        <span class="p">)</span>
<a id="__codelineno-0-868" name="__codelineno-0-868"></a>    <span class="p">)</span>
<a id="__codelineno-0-869" name="__codelineno-0-869"></a>    <span class="n">file_path</span> <span class="o">=</span> <span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="s2">&quot;acs5-profile-group-</span><span class="si">{table}</span><span class="s2">-zcta.csv&quot;</span>
<a id="__codelineno-0-870" name="__codelineno-0-870"></a>    <span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-871" name="__codelineno-0-871"></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_acs5_profile_table_to_group_name" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_acs5_profile_table_to_group_name</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a JSON representation of a table's attributes.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Tables must be:
    * DP02
    * DP02PR
    * DP03
    * DP04
    * DP05</p>
<p>Returned object will have entries similar to:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&quot;DP05_0037M&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&quot;concept&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;predicateType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DP05&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nt">&quot;predicateOnly&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">}</span>
</code></pre></div></p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the table to lookup</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>which acs5 year to look up</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, <span title="typing.Any">Any</span>] | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>str | Any: json object</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-735">735</a></span>
<span class="normal"><a href="#__codelineno-0-736">736</a></span>
<span class="normal"><a href="#__codelineno-0-737">737</a></span>
<span class="normal"><a href="#__codelineno-0-738">738</a></span>
<span class="normal"><a href="#__codelineno-0-739">739</a></span>
<span class="normal"><a href="#__codelineno-0-740">740</a></span>
<span class="normal"><a href="#__codelineno-0-741">741</a></span>
<span class="normal"><a href="#__codelineno-0-742">742</a></span>
<span class="normal"><a href="#__codelineno-0-743">743</a></span>
<span class="normal"><a href="#__codelineno-0-744">744</a></span>
<span class="normal"><a href="#__codelineno-0-745">745</a></span>
<span class="normal"><a href="#__codelineno-0-746">746</a></span>
<span class="normal"><a href="#__codelineno-0-747">747</a></span>
<span class="normal"><a href="#__codelineno-0-748">748</a></span>
<span class="normal"><a href="#__codelineno-0-749">749</a></span>
<span class="normal"><a href="#__codelineno-0-750">750</a></span>
<span class="normal"><a href="#__codelineno-0-751">751</a></span>
<span class="normal"><a href="#__codelineno-0-752">752</a></span>
<span class="normal"><a href="#__codelineno-0-753">753</a></span>
<span class="normal"><a href="#__codelineno-0-754">754</a></span>
<span class="normal"><a href="#__codelineno-0-755">755</a></span>
<span class="normal"><a href="#__codelineno-0-756">756</a></span>
<span class="normal"><a href="#__codelineno-0-757">757</a></span>
<span class="normal"><a href="#__codelineno-0-758">758</a></span>
<span class="normal"><a href="#__codelineno-0-759">759</a></span>
<span class="normal"><a href="#__codelineno-0-760">760</a></span>
<span class="normal"><a href="#__codelineno-0-761">761</a></span>
<span class="normal"><a href="#__codelineno-0-762">762</a></span>
<span class="normal"><a href="#__codelineno-0-763">763</a></span>
<span class="normal"><a href="#__codelineno-0-764">764</a></span>
<span class="normal"><a href="#__codelineno-0-765">765</a></span>
<span class="normal"><a href="#__codelineno-0-766">766</a></span>
<span class="normal"><a href="#__codelineno-0-767">767</a></span>
<span class="normal"><a href="#__codelineno-0-768">768</a></span>
<span class="normal"><a href="#__codelineno-0-769">769</a></span>
<span class="normal"><a href="#__codelineno-0-770">770</a></span>
<span class="normal"><a href="#__codelineno-0-771">771</a></span>
<span class="normal"><a href="#__codelineno-0-772">772</a></span>
<span class="normal"><a href="#__codelineno-0-773">773</a></span>
<span class="normal"><a href="#__codelineno-0-774">774</a></span>
<span class="normal"><a href="#__codelineno-0-775">775</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-735" name="__codelineno-0-735"></a><span class="k">def</span> <span class="nf">get_acs5_profile_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-736" name="__codelineno-0-736"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-737" name="__codelineno-0-737"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-738" name="__codelineno-0-738"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a JSON representation of a table&#39;s attributes.</span>
<a id="__codelineno-0-739" name="__codelineno-0-739"></a>
<a id="__codelineno-0-740" name="__codelineno-0-740"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-741" name="__codelineno-0-741"></a><span class="sd">        Tables must be:</span>
<a id="__codelineno-0-742" name="__codelineno-0-742"></a><span class="sd">            * DP02</span>
<a id="__codelineno-0-743" name="__codelineno-0-743"></a><span class="sd">            * DP02PR</span>
<a id="__codelineno-0-744" name="__codelineno-0-744"></a><span class="sd">            * DP03</span>
<a id="__codelineno-0-745" name="__codelineno-0-745"></a><span class="sd">            * DP04</span>
<a id="__codelineno-0-746" name="__codelineno-0-746"></a><span class="sd">            * DP05</span>
<a id="__codelineno-0-747" name="__codelineno-0-747"></a>
<a id="__codelineno-0-748" name="__codelineno-0-748"></a><span class="sd">        Returned object will have entries similar to:</span>
<a id="__codelineno-0-749" name="__codelineno-0-749"></a><span class="sd">        ```json</span>
<a id="__codelineno-0-750" name="__codelineno-0-750"></a><span class="sd">        &quot;DP05_0037M&quot;: {</span>
<a id="__codelineno-0-751" name="__codelineno-0-751"></a><span class="sd">            &quot;label&quot;: &quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;,</span>
<a id="__codelineno-0-752" name="__codelineno-0-752"></a><span class="sd">            &quot;concept&quot;: &quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;,</span>
<a id="__codelineno-0-753" name="__codelineno-0-753"></a><span class="sd">            &quot;predicateType&quot;: &quot;int&quot;,</span>
<a id="__codelineno-0-754" name="__codelineno-0-754"></a><span class="sd">            &quot;group&quot;: &quot;DP05&quot;,</span>
<a id="__codelineno-0-755" name="__codelineno-0-755"></a><span class="sd">            &quot;limit&quot;: 0,</span>
<a id="__codelineno-0-756" name="__codelineno-0-756"></a><span class="sd">            &quot;predicateOnly&quot;: true</span>
<a id="__codelineno-0-757" name="__codelineno-0-757"></a><span class="sd">        }</span>
<a id="__codelineno-0-758" name="__codelineno-0-758"></a><span class="sd">        ```</span>
<a id="__codelineno-0-759" name="__codelineno-0-759"></a>
<a id="__codelineno-0-760" name="__codelineno-0-760"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-761" name="__codelineno-0-761"></a><span class="sd">        table (str): the table to lookup</span>
<a id="__codelineno-0-762" name="__codelineno-0-762"></a><span class="sd">        year (str): which acs5 year to look up</span>
<a id="__codelineno-0-763" name="__codelineno-0-763"></a>
<a id="__codelineno-0-764" name="__codelineno-0-764"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-765" name="__codelineno-0-765"></a><span class="sd">        str | Any: json object</span>
<a id="__codelineno-0-766" name="__codelineno-0-766"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-767" name="__codelineno-0-767"></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs5-profile-groups-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-768" name="__codelineno-0-768"></a>    <span class="n">groups_url</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-769" name="__codelineno-0-769"></a>        <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/profile/groups/</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-770" name="__codelineno-0-770"></a>    <span class="p">)</span>
<a id="__codelineno-0-771" name="__codelineno-0-771"></a>    <span class="n">groups_to_label_translation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">groups_url</span><span class="p">)</span>
<a id="__codelineno-0-772" name="__codelineno-0-772"></a>    <span class="k">if</span> <span class="n">groups_to_label_translation</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-773" name="__codelineno-0-773"></a>        <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Something is wrong with groups label dict&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-774" name="__codelineno-0-774"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-775" name="__codelineno-0-775"></a>    <span class="k">return</span> <span class="n">groups_to_label_translation</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_acs5_subject_table_group_for_zcta_by_year" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_acs5_subject_table_group_for_zcta_by_year</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>CSV output of a acs 5 year subject survey table</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>census acs5 table</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>year to search</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-954">954</a></span>
<span class="normal"><a href="#__codelineno-0-955">955</a></span>
<span class="normal"><a href="#__codelineno-0-956">956</a></span>
<span class="normal"><a href="#__codelineno-0-957">957</a></span>
<span class="normal"><a href="#__codelineno-0-958">958</a></span>
<span class="normal"><a href="#__codelineno-0-959">959</a></span>
<span class="normal"><a href="#__codelineno-0-960">960</a></span>
<span class="normal"><a href="#__codelineno-0-961">961</a></span>
<span class="normal"><a href="#__codelineno-0-962">962</a></span>
<span class="normal"><a href="#__codelineno-0-963">963</a></span>
<span class="normal"><a href="#__codelineno-0-964">964</a></span>
<span class="normal"><a href="#__codelineno-0-965">965</a></span>
<span class="normal"><a href="#__codelineno-0-966">966</a></span>
<span class="normal"><a href="#__codelineno-0-967">967</a></span>
<span class="normal"><a href="#__codelineno-0-968">968</a></span>
<span class="normal"><a href="#__codelineno-0-969">969</a></span>
<span class="normal"><a href="#__codelineno-0-970">970</a></span>
<span class="normal"><a href="#__codelineno-0-971">971</a></span>
<span class="normal"><a href="#__codelineno-0-972">972</a></span>
<span class="normal"><a href="#__codelineno-0-973">973</a></span>
<span class="normal"><a href="#__codelineno-0-974">974</a></span>
<span class="normal"><a href="#__codelineno-0-975">975</a></span>
<span class="normal"><a href="#__codelineno-0-976">976</a></span>
<span class="normal"><a href="#__codelineno-0-977">977</a></span>
<span class="normal"><a href="#__codelineno-0-978">978</a></span>
<span class="normal"><a href="#__codelineno-0-979">979</a></span>
<span class="normal"><a href="#__codelineno-0-980">980</a></span>
<span class="normal"><a href="#__codelineno-0-981">981</a></span>
<span class="normal"><a href="#__codelineno-0-982">982</a></span>
<span class="normal"><a href="#__codelineno-0-983">983</a></span>
<span class="normal"><a href="#__codelineno-0-984">984</a></span>
<span class="normal"><a href="#__codelineno-0-985">985</a></span>
<span class="normal"><a href="#__codelineno-0-986">986</a></span>
<span class="normal"><a href="#__codelineno-0-987">987</a></span>
<span class="normal"><a href="#__codelineno-0-988">988</a></span>
<span class="normal"><a href="#__codelineno-0-989">989</a></span>
<span class="normal"><a href="#__codelineno-0-990">990</a></span>
<span class="normal"><a href="#__codelineno-0-991">991</a></span>
<span class="normal"><a href="#__codelineno-0-992">992</a></span>
<span class="normal"><a href="#__codelineno-0-993">993</a></span>
<span class="normal"><a href="#__codelineno-0-994">994</a></span>
<span class="normal"><a href="#__codelineno-0-995">995</a></span>
<span class="normal"><a href="#__codelineno-0-996">996</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-954" name="__codelineno-0-954"></a><span class="k">def</span> <span class="nf">get_acs5_subject_table_group_for_zcta_by_year</span><span class="p">(</span>
<a id="__codelineno-0-955" name="__codelineno-0-955"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-956" name="__codelineno-0-956"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-957" name="__codelineno-0-957"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;CSV output of a acs 5 year subject survey table</span>
<a id="__codelineno-0-958" name="__codelineno-0-958"></a>
<a id="__codelineno-0-959" name="__codelineno-0-959"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-960" name="__codelineno-0-960"></a><span class="sd">        table (str): census acs5 table</span>
<a id="__codelineno-0-961" name="__codelineno-0-961"></a><span class="sd">        year (str): year to search</span>
<a id="__codelineno-0-962" name="__codelineno-0-962"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-963" name="__codelineno-0-963"></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs-subject-table-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-964" name="__codelineno-0-964"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/subject?get=group(</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">)&amp;for=zip%20code%20tabulation%20area:*&quot;</span>
<a id="__codelineno-0-965" name="__codelineno-0-965"></a>    <span class="n">list_of_list_table_json</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-966" name="__codelineno-0-966"></a>
<a id="__codelineno-0-967" name="__codelineno-0-967"></a>    <span class="k">if</span> <span class="n">list_of_list_table_json</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-968" name="__codelineno-0-968"></a>        <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-969" name="__codelineno-0-969"></a>            <span class="sa">f</span><span class="s2">&quot;Could not load table </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">. Perhaps the api is down or there was an error saving/reading the file.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-970" name="__codelineno-0-970"></a>            <span class="s2">&quot;warn&quot;</span><span class="p">,</span>
<a id="__codelineno-0-971" name="__codelineno-0-971"></a>        <span class="p">)</span>
<a id="__codelineno-0-972" name="__codelineno-0-972"></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
<a id="__codelineno-0-973" name="__codelineno-0-973"></a>
<a id="__codelineno-0-974" name="__codelineno-0-974"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-975" name="__codelineno-0-975"></a>        <span class="n">list_of_list_table_json</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-976" name="__codelineno-0-976"></a>        <span class="n">table</span><span class="p">,</span>
<a id="__codelineno-0-977" name="__codelineno-0-977"></a>        <span class="n">year</span><span class="p">,</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-978" name="__codelineno-0-978"></a>    <span class="p">)</span>
<a id="__codelineno-0-979" name="__codelineno-0-979"></a>
<a id="__codelineno-0-980" name="__codelineno-0-980"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">list_of_list_table_json</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">)</span>
<a id="__codelineno-0-981" name="__codelineno-0-981"></a>    <span class="c1"># funky stuff to get the first list to be the name of the columns</span>
<a id="__codelineno-0-982" name="__codelineno-0-982"></a>    <span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-983" name="__codelineno-0-983"></a>        <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">to_dicts</span><span class="p">()</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<a id="__codelineno-0-984" name="__codelineno-0-984"></a>        <span class="o">.</span><span class="n">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-985" name="__codelineno-0-985"></a>        <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">&quot;(?i)^(ann)&quot;</span><span class="p">),</span> <span class="n">cs</span><span class="o">.</span><span class="n">matches</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(?i)</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">))</span>
<a id="__codelineno-0-986" name="__codelineno-0-986"></a>        <span class="o">.</span><span class="n">rename</span><span class="p">({</span><span class="s2">&quot;zip code tabulation area&quot;</span><span class="p">:</span> <span class="s2">&quot;ZCTA&quot;</span><span class="p">})</span>
<a id="__codelineno-0-987" name="__codelineno-0-987"></a>        <span class="o">.</span><span class="n">cast</span><span class="p">(</span>
<a id="__codelineno-0-988" name="__codelineno-0-988"></a>            <span class="p">{</span>
<a id="__codelineno-0-989" name="__codelineno-0-989"></a>                <span class="s2">&quot;ZCTA&quot;</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">Int32</span><span class="p">,</span>
<a id="__codelineno-0-990" name="__codelineno-0-990"></a>            <span class="p">}</span>
<a id="__codelineno-0-991" name="__codelineno-0-991"></a>        <span class="p">)</span>
<a id="__codelineno-0-992" name="__codelineno-0-992"></a>    <span class="p">)</span>
<a id="__codelineno-0-993" name="__codelineno-0-993"></a>    <span class="n">file_path</span> <span class="o">=</span> <span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="s2">&quot;acs5-subject-group-</span><span class="si">{table}</span><span class="s2">-zcta.csv&quot;</span>
<a id="__codelineno-0-994" name="__codelineno-0-994"></a>    <span class="c1"># may not have to write. but cache func doesn&#39;t return whether it hits or not</span>
<a id="__codelineno-0-995" name="__codelineno-0-995"></a>    <span class="n">df</span><span class="o">.</span><span class="n">write_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<a id="__codelineno-0-996" name="__codelineno-0-996"></a>    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_acs5_subject_table_to_group_name" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_acs5_subject_table_to_group_name</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a JSON representation of a table's attributes.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Tables can be found at: https://www.census.gov/acs/www/data/data-tables-and-tools/subject-tables/</p>
<p>Returned object will have entries similar to:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">&quot;DP05_0037M&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;label&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;</span><span class="p">,</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&quot;concept&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;</span><span class="p">,</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;predicateType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DP05&quot;</span><span class="p">,</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nt">&quot;predicateOnly&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="p">}</span>
</code></pre></div></p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the table to lookup</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>which acs5 year to look up</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, <span title="typing.Any">Any</span>] | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>str | Any: variables</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-873">873</a></span>
<span class="normal"><a href="#__codelineno-0-874">874</a></span>
<span class="normal"><a href="#__codelineno-0-875">875</a></span>
<span class="normal"><a href="#__codelineno-0-876">876</a></span>
<span class="normal"><a href="#__codelineno-0-877">877</a></span>
<span class="normal"><a href="#__codelineno-0-878">878</a></span>
<span class="normal"><a href="#__codelineno-0-879">879</a></span>
<span class="normal"><a href="#__codelineno-0-880">880</a></span>
<span class="normal"><a href="#__codelineno-0-881">881</a></span>
<span class="normal"><a href="#__codelineno-0-882">882</a></span>
<span class="normal"><a href="#__codelineno-0-883">883</a></span>
<span class="normal"><a href="#__codelineno-0-884">884</a></span>
<span class="normal"><a href="#__codelineno-0-885">885</a></span>
<span class="normal"><a href="#__codelineno-0-886">886</a></span>
<span class="normal"><a href="#__codelineno-0-887">887</a></span>
<span class="normal"><a href="#__codelineno-0-888">888</a></span>
<span class="normal"><a href="#__codelineno-0-889">889</a></span>
<span class="normal"><a href="#__codelineno-0-890">890</a></span>
<span class="normal"><a href="#__codelineno-0-891">891</a></span>
<span class="normal"><a href="#__codelineno-0-892">892</a></span>
<span class="normal"><a href="#__codelineno-0-893">893</a></span>
<span class="normal"><a href="#__codelineno-0-894">894</a></span>
<span class="normal"><a href="#__codelineno-0-895">895</a></span>
<span class="normal"><a href="#__codelineno-0-896">896</a></span>
<span class="normal"><a href="#__codelineno-0-897">897</a></span>
<span class="normal"><a href="#__codelineno-0-898">898</a></span>
<span class="normal"><a href="#__codelineno-0-899">899</a></span>
<span class="normal"><a href="#__codelineno-0-900">900</a></span>
<span class="normal"><a href="#__codelineno-0-901">901</a></span>
<span class="normal"><a href="#__codelineno-0-902">902</a></span>
<span class="normal"><a href="#__codelineno-0-903">903</a></span>
<span class="normal"><a href="#__codelineno-0-904">904</a></span>
<span class="normal"><a href="#__codelineno-0-905">905</a></span>
<span class="normal"><a href="#__codelineno-0-906">906</a></span>
<span class="normal"><a href="#__codelineno-0-907">907</a></span>
<span class="normal"><a href="#__codelineno-0-908">908</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-873" name="__codelineno-0-873"></a><span class="k">def</span> <span class="nf">get_acs5_subject_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-874" name="__codelineno-0-874"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-875" name="__codelineno-0-875"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-876" name="__codelineno-0-876"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a JSON representation of a table&#39;s attributes.</span>
<a id="__codelineno-0-877" name="__codelineno-0-877"></a>
<a id="__codelineno-0-878" name="__codelineno-0-878"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-879" name="__codelineno-0-879"></a><span class="sd">        Tables can be found at: https://www.census.gov/acs/www/data/data-tables-and-tools/subject-tables/</span>
<a id="__codelineno-0-880" name="__codelineno-0-880"></a>
<a id="__codelineno-0-881" name="__codelineno-0-881"></a><span class="sd">        Returned object will have entries similar to:</span>
<a id="__codelineno-0-882" name="__codelineno-0-882"></a><span class="sd">        ```json</span>
<a id="__codelineno-0-883" name="__codelineno-0-883"></a><span class="sd">        &quot;DP05_0037M&quot;: {</span>
<a id="__codelineno-0-884" name="__codelineno-0-884"></a><span class="sd">            &quot;label&quot;: &quot;Margin of Error!!RACE!!Total population!!One race!!White&quot;,</span>
<a id="__codelineno-0-885" name="__codelineno-0-885"></a><span class="sd">            &quot;concept&quot;: &quot;ACS DEMOGRAPHIC AND HOUSING ESTIMATES&quot;,</span>
<a id="__codelineno-0-886" name="__codelineno-0-886"></a><span class="sd">            &quot;predicateType&quot;: &quot;int&quot;,</span>
<a id="__codelineno-0-887" name="__codelineno-0-887"></a><span class="sd">            &quot;group&quot;: &quot;DP05&quot;,</span>
<a id="__codelineno-0-888" name="__codelineno-0-888"></a><span class="sd">            &quot;limit&quot;: 0,</span>
<a id="__codelineno-0-889" name="__codelineno-0-889"></a><span class="sd">            &quot;predicateOnly&quot;: true</span>
<a id="__codelineno-0-890" name="__codelineno-0-890"></a><span class="sd">        }</span>
<a id="__codelineno-0-891" name="__codelineno-0-891"></a><span class="sd">        ```</span>
<a id="__codelineno-0-892" name="__codelineno-0-892"></a>
<a id="__codelineno-0-893" name="__codelineno-0-893"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-894" name="__codelineno-0-894"></a><span class="sd">        table (str): the table to lookup</span>
<a id="__codelineno-0-895" name="__codelineno-0-895"></a><span class="sd">        year (str): which acs5 year to look up</span>
<a id="__codelineno-0-896" name="__codelineno-0-896"></a>
<a id="__codelineno-0-897" name="__codelineno-0-897"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-898" name="__codelineno-0-898"></a><span class="sd">        str | Any: variables</span>
<a id="__codelineno-0-899" name="__codelineno-0-899"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-900" name="__codelineno-0-900"></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">-acs5-subject-groups-</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-901" name="__codelineno-0-901"></a>    <span class="n">groups_url</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-902" name="__codelineno-0-902"></a>        <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/</span><span class="si">{</span><span class="n">year</span><span class="si">}</span><span class="s2">/acs/acs5/subject/groups/</span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2">.json&quot;</span>
<a id="__codelineno-0-903" name="__codelineno-0-903"></a>    <span class="p">)</span>
<a id="__codelineno-0-904" name="__codelineno-0-904"></a>    <span class="n">groups_to_label_translation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">groups_url</span><span class="p">)</span>
<a id="__codelineno-0-905" name="__codelineno-0-905"></a>    <span class="k">if</span> <span class="n">groups_to_label_translation</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
<a id="__codelineno-0-906" name="__codelineno-0-906"></a>        <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Something is wrong with groups label dict&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-907" name="__codelineno-0-907"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-908" name="__codelineno-0-908"></a>    <span class="k">return</span> <span class="n">groups_to_label_translation</span><span class="p">[</span><span class="s2">&quot;variables&quot;</span><span class="p">]</span>  <span class="c1"># type: ignore</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_and_cache_data" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_and_cache_data</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">url_to_lookup_on_miss</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Cache files.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>file_name</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>file name to save/lookup</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>url_to_lookup_on_miss</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the Census url to lookup</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, str] | bool</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>bool | dict[str, str] | None | Any: the dict of <code>tablename: label</code> or</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-679">679</a></span>
<span class="normal"><a href="#__codelineno-0-680">680</a></span>
<span class="normal"><a href="#__codelineno-0-681">681</a></span>
<span class="normal"><a href="#__codelineno-0-682">682</a></span>
<span class="normal"><a href="#__codelineno-0-683">683</a></span>
<span class="normal"><a href="#__codelineno-0-684">684</a></span>
<span class="normal"><a href="#__codelineno-0-685">685</a></span>
<span class="normal"><a href="#__codelineno-0-686">686</a></span>
<span class="normal"><a href="#__codelineno-0-687">687</a></span>
<span class="normal"><a href="#__codelineno-0-688">688</a></span>
<span class="normal"><a href="#__codelineno-0-689">689</a></span>
<span class="normal"><a href="#__codelineno-0-690">690</a></span>
<span class="normal"><a href="#__codelineno-0-691">691</a></span>
<span class="normal"><a href="#__codelineno-0-692">692</a></span>
<span class="normal"><a href="#__codelineno-0-693">693</a></span>
<span class="normal"><a href="#__codelineno-0-694">694</a></span>
<span class="normal"><a href="#__codelineno-0-695">695</a></span>
<span class="normal"><a href="#__codelineno-0-696">696</a></span>
<span class="normal"><a href="#__codelineno-0-697">697</a></span>
<span class="normal"><a href="#__codelineno-0-698">698</a></span>
<span class="normal"><a href="#__codelineno-0-699">699</a></span>
<span class="normal"><a href="#__codelineno-0-700">700</a></span>
<span class="normal"><a href="#__codelineno-0-701">701</a></span>
<span class="normal"><a href="#__codelineno-0-702">702</a></span>
<span class="normal"><a href="#__codelineno-0-703">703</a></span>
<span class="normal"><a href="#__codelineno-0-704">704</a></span>
<span class="normal"><a href="#__codelineno-0-705">705</a></span>
<span class="normal"><a href="#__codelineno-0-706">706</a></span>
<span class="normal"><a href="#__codelineno-0-707">707</a></span>
<span class="normal"><a href="#__codelineno-0-708">708</a></span>
<span class="normal"><a href="#__codelineno-0-709">709</a></span>
<span class="normal"><a href="#__codelineno-0-710">710</a></span>
<span class="normal"><a href="#__codelineno-0-711">711</a></span>
<span class="normal"><a href="#__codelineno-0-712">712</a></span>
<span class="normal"><a href="#__codelineno-0-713">713</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-679" name="__codelineno-0-679"></a><span class="k">def</span> <span class="nf">get_and_cache_data</span><span class="p">(</span>
<a id="__codelineno-0-680" name="__codelineno-0-680"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">url_to_lookup_on_miss</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-681" name="__codelineno-0-681"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-682" name="__codelineno-0-682"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Cache files.</span>
<a id="__codelineno-0-683" name="__codelineno-0-683"></a>
<a id="__codelineno-0-684" name="__codelineno-0-684"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-685" name="__codelineno-0-685"></a><span class="sd">        file_name (str): file name to save/lookup</span>
<a id="__codelineno-0-686" name="__codelineno-0-686"></a><span class="sd">        url_to_lookup_on_miss (str): the Census url to lookup</span>
<a id="__codelineno-0-687" name="__codelineno-0-687"></a>
<a id="__codelineno-0-688" name="__codelineno-0-688"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-689" name="__codelineno-0-689"></a><span class="sd">        bool | dict[str, str] | None | Any: the dict of `tablename: label` or</span>
<a id="__codelineno-0-690" name="__codelineno-0-690"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-691" name="__codelineno-0-691"></a>    <span class="n">CENSUS_DATA_DIR_PATH</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-692" name="__codelineno-0-692"></a>
<a id="__codelineno-0-693" name="__codelineno-0-693"></a>    <span class="n">my_json</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-694" name="__codelineno-0-694"></a>
<a id="__codelineno-0-695" name="__codelineno-0-695"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-696" name="__codelineno-0-696"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-697" name="__codelineno-0-697"></a>            <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reading </span><span class="si">{</span><span class="n">file_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<a id="__codelineno-0-698" name="__codelineno-0-698"></a>            <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-699" name="__codelineno-0-699"></a>                <span class="n">my_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-700" name="__codelineno-0-700"></a>            <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">:</span>
<a id="__codelineno-0-701" name="__codelineno-0-701"></a>                <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not decode cached file&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
<a id="__codelineno-0-702" name="__codelineno-0-702"></a>                <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-703" name="__codelineno-0-703"></a>    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
<a id="__codelineno-0-704" name="__codelineno-0-704"></a>        <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url_to_lookup_on_miss</span><span class="p">)</span>
<a id="__codelineno-0-705" name="__codelineno-0-705"></a>        <span class="k">if</span> <span class="n">req</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-706" name="__codelineno-0-706"></a>            <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find census file </span><span class="si">{</span><span class="n">req</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">)</span>
<a id="__codelineno-0-707" name="__codelineno-0-707"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-708" name="__codelineno-0-708"></a>        <span class="n">req</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-709" name="__codelineno-0-709"></a>        <span class="n">my_json</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-710" name="__codelineno-0-710"></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">CENSUS_DATA_DIR_PATH</span> <span class="o">/</span> <span class="n">file_name</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<a id="__codelineno-0-711" name="__codelineno-0-711"></a>            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">my_json</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<a id="__codelineno-0-712" name="__codelineno-0-712"></a>
<a id="__codelineno-0-713" name="__codelineno-0-713"></a>    <span class="k">return</span> <span class="n">my_json</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.get_race_makeup_by_zcta" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">get_race_makeup_by_zcta</span><span class="p">(</span><span class="n">zcta</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get race make up by zcta from. DO NOT USE</p>

<details class="note" open>
  <summary>Note</summary>
  <p>use <code>get_table_group_for_zcta_by_state_by_year</code></p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>zcta</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>zcta</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>str | None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>str | None: text or none</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-715">715</a></span>
<span class="normal"><a href="#__codelineno-0-716">716</a></span>
<span class="normal"><a href="#__codelineno-0-717">717</a></span>
<span class="normal"><a href="#__codelineno-0-718">718</a></span>
<span class="normal"><a href="#__codelineno-0-719">719</a></span>
<span class="normal"><a href="#__codelineno-0-720">720</a></span>
<span class="normal"><a href="#__codelineno-0-721">721</a></span>
<span class="normal"><a href="#__codelineno-0-722">722</a></span>
<span class="normal"><a href="#__codelineno-0-723">723</a></span>
<span class="normal"><a href="#__codelineno-0-724">724</a></span>
<span class="normal"><a href="#__codelineno-0-725">725</a></span>
<span class="normal"><a href="#__codelineno-0-726">726</a></span>
<span class="normal"><a href="#__codelineno-0-727">727</a></span>
<span class="normal"><a href="#__codelineno-0-728">728</a></span>
<span class="normal"><a href="#__codelineno-0-729">729</a></span>
<span class="normal"><a href="#__codelineno-0-730">730</a></span>
<span class="normal"><a href="#__codelineno-0-731">731</a></span>
<span class="normal"><a href="#__codelineno-0-732">732</a></span>
<span class="normal"><a href="#__codelineno-0-733">733</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-715" name="__codelineno-0-715"></a><span class="k">def</span> <span class="nf">get_race_makeup_by_zcta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zcta</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-716" name="__codelineno-0-716"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get race make up by zcta from. DO NOT USE</span>
<a id="__codelineno-0-717" name="__codelineno-0-717"></a>
<a id="__codelineno-0-718" name="__codelineno-0-718"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-719" name="__codelineno-0-719"></a><span class="sd">        use `get_table_group_for_zcta_by_state_by_year`</span>
<a id="__codelineno-0-720" name="__codelineno-0-720"></a>
<a id="__codelineno-0-721" name="__codelineno-0-721"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-722" name="__codelineno-0-722"></a><span class="sd">        zcta (str): zcta</span>
<a id="__codelineno-0-723" name="__codelineno-0-723"></a>
<a id="__codelineno-0-724" name="__codelineno-0-724"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-725" name="__codelineno-0-725"></a><span class="sd">        str | None: text or none</span>
<a id="__codelineno-0-726" name="__codelineno-0-726"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-727" name="__codelineno-0-727"></a>    <span class="c1"># get white, black, american indian/native alaskan, asian, NH/PI, other. note that these are estimates, margin of error can be had with &quot;M&quot;</span>
<a id="__codelineno-0-728" name="__codelineno-0-728"></a>    <span class="n">req</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span>
<a id="__codelineno-0-729" name="__codelineno-0-729"></a>        <span class="sa">f</span><span class="s2">&quot;https://api.census.gov/data/2021/acs/acs5/profile?get=DP05_0064E,DP05_0065E,DP05_0066E,DP05_0067E,DP05_0068E,DP05_0069E&amp;for=zip%20code%20tabulation%20area:</span><span class="si">{</span><span class="n">zcta</span><span class="si">}</span><span class="s2">&amp;key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-730" name="__codelineno-0-730"></a>    <span class="p">)</span>
<a id="__codelineno-0-731" name="__codelineno-0-731"></a>    <span class="k">if</span> <span class="n">req</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-732" name="__codelineno-0-732"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-0-733" name="__codelineno-0-733"></a>    <span class="k">return</span> <span class="n">req</span><span class="o">.</span><span class="n">text</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get the label name for a table and row for the acs5 profile surveys.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>headers</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>header row</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>have to look again</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the year</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>None</code></td>          <td>
                <code>None</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>translates the list of table_row_selector to its english label</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-777">777</a></span>
<span class="normal"><a href="#__codelineno-0-778">778</a></span>
<span class="normal"><a href="#__codelineno-0-779">779</a></span>
<span class="normal"><a href="#__codelineno-0-780">780</a></span>
<span class="normal"><a href="#__codelineno-0-781">781</a></span>
<span class="normal"><a href="#__codelineno-0-782">782</a></span>
<span class="normal"><a href="#__codelineno-0-783">783</a></span>
<span class="normal"><a href="#__codelineno-0-784">784</a></span>
<span class="normal"><a href="#__codelineno-0-785">785</a></span>
<span class="normal"><a href="#__codelineno-0-786">786</a></span>
<span class="normal"><a href="#__codelineno-0-787">787</a></span>
<span class="normal"><a href="#__codelineno-0-788">788</a></span>
<span class="normal"><a href="#__codelineno-0-789">789</a></span>
<span class="normal"><a href="#__codelineno-0-790">790</a></span>
<span class="normal"><a href="#__codelineno-0-791">791</a></span>
<span class="normal"><a href="#__codelineno-0-792">792</a></span>
<span class="normal"><a href="#__codelineno-0-793">793</a></span>
<span class="normal"><a href="#__codelineno-0-794">794</a></span>
<span class="normal"><a href="#__codelineno-0-795">795</a></span>
<span class="normal"><a href="#__codelineno-0-796">796</a></span>
<span class="normal"><a href="#__codelineno-0-797">797</a></span>
<span class="normal"><a href="#__codelineno-0-798">798</a></span>
<span class="normal"><a href="#__codelineno-0-799">799</a></span>
<span class="normal"><a href="#__codelineno-0-800">800</a></span>
<span class="normal"><a href="#__codelineno-0-801">801</a></span>
<span class="normal"><a href="#__codelineno-0-802">802</a></span>
<span class="normal"><a href="#__codelineno-0-803">803</a></span>
<span class="normal"><a href="#__codelineno-0-804">804</a></span>
<span class="normal"><a href="#__codelineno-0-805">805</a></span>
<span class="normal"><a href="#__codelineno-0-806">806</a></span>
<span class="normal"><a href="#__codelineno-0-807">807</a></span>
<span class="normal"><a href="#__codelineno-0-808">808</a></span>
<span class="normal"><a href="#__codelineno-0-809">809</a></span>
<span class="normal"><a href="#__codelineno-0-810">810</a></span>
<span class="normal"><a href="#__codelineno-0-811">811</a></span>
<span class="normal"><a href="#__codelineno-0-812">812</a></span>
<span class="normal"><a href="#__codelineno-0-813">813</a></span>
<span class="normal"><a href="#__codelineno-0-814">814</a></span>
<span class="normal"><a href="#__codelineno-0-815">815</a></span>
<span class="normal"><a href="#__codelineno-0-816">816</a></span>
<span class="normal"><a href="#__codelineno-0-817">817</a></span>
<span class="normal"><a href="#__codelineno-0-818">818</a></span>
<span class="normal"><a href="#__codelineno-0-819">819</a></span>
<span class="normal"><a href="#__codelineno-0-820">820</a></span>
<span class="normal"><a href="#__codelineno-0-821">821</a></span>
<span class="normal"><a href="#__codelineno-0-822">822</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-777" name="__codelineno-0-777"></a><span class="k">def</span> <span class="nf">translate_and_truncate_unique_acs5_profile_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-778" name="__codelineno-0-778"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-779" name="__codelineno-0-779"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-780" name="__codelineno-0-780"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the label name for a table and row for the acs5 profile surveys.</span>
<a id="__codelineno-0-781" name="__codelineno-0-781"></a>
<a id="__codelineno-0-782" name="__codelineno-0-782"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-783" name="__codelineno-0-783"></a><span class="sd">        headers (list[str]): header row</span>
<a id="__codelineno-0-784" name="__codelineno-0-784"></a><span class="sd">        table (str): have to look again</span>
<a id="__codelineno-0-785" name="__codelineno-0-785"></a><span class="sd">        year (str): the year</span>
<a id="__codelineno-0-786" name="__codelineno-0-786"></a>
<a id="__codelineno-0-787" name="__codelineno-0-787"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-788" name="__codelineno-0-788"></a><span class="sd">        None: translates the list of table_row_selector to its english label</span>
<a id="__codelineno-0-789" name="__codelineno-0-789"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-790" name="__codelineno-0-790"></a>    <span class="c1"># is going to read the file multiple times, save last req as {&quot;table&quot;: req_json[table]...} for this?</span>
<a id="__codelineno-0-791" name="__codelineno-0-791"></a>    <span class="n">groups_to_label_translation_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acs5_profile_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-792" name="__codelineno-0-792"></a>        <span class="n">table</span><span class="p">,</span> <span class="n">year</span>
<a id="__codelineno-0-793" name="__codelineno-0-793"></a>    <span class="p">)</span>
<a id="__codelineno-0-794" name="__codelineno-0-794"></a>    <span class="k">if</span> <span class="n">groups_to_label_translation_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-795" name="__codelineno-0-795"></a>        <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate headers&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-796" name="__codelineno-0-796"></a>        <span class="k">return</span> <span class="n">groups_to_label_translation_dict</span>
<a id="__codelineno-0-797" name="__codelineno-0-797"></a>
<a id="__codelineno-0-798" name="__codelineno-0-798"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
<a id="__codelineno-0-799" name="__codelineno-0-799"></a>        <span class="n">new_col_name_dict</span> <span class="o">=</span> <span class="n">groups_to_label_translation_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
<a id="__codelineno-0-800" name="__codelineno-0-800"></a>        <span class="k">if</span> <span class="n">new_col_name_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-801" name="__codelineno-0-801"></a>            <span class="c1"># returns none if not in dict, means we have custom name and can continue</span>
<a id="__codelineno-0-802" name="__codelineno-0-802"></a>            <span class="k">continue</span>
<a id="__codelineno-0-803" name="__codelineno-0-803"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name_dict</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
<a id="__codelineno-0-804" name="__codelineno-0-804"></a>        <span class="c1"># qgis doesnt allow field names of 80+ chars. massage into form, then cut off</span>
<a id="__codelineno-0-805" name="__codelineno-0-805"></a>        <span class="c1"># delimiter for table subsection</span>
<a id="__codelineno-0-806" name="__codelineno-0-806"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;!!&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-807" name="__codelineno-0-807"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-808" name="__codelineno-0-808"></a>        <span class="c1"># easier to read</span>
<a id="__codelineno-0-809" name="__codelineno-0-809"></a>        <span class="n">new_col_name_parts</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-810" name="__codelineno-0-810"></a>        <span class="k">for</span> <span class="n">idy</span><span class="p">,</span> <span class="n">no_format</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">):</span>
<a id="__codelineno-0-811" name="__codelineno-0-811"></a>            <span class="n">new_col_name_parts</span><span class="p">[</span><span class="n">idy</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_format</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-812" name="__codelineno-0-812"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">)</span>
<a id="__codelineno-0-813" name="__codelineno-0-813"></a>        <span class="c1"># shortenings to fit length requirement</span>
<a id="__codelineno-0-814" name="__codelineno-0-814"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">replace_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-815" name="__codelineno-0-815"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-816" name="__codelineno-0-816"></a>        <span class="c1"># limiter</span>
<a id="__codelineno-0-817" name="__codelineno-0-817"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="p">[</span>
<a id="__codelineno-0-818" name="__codelineno-0-818"></a>            <span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_col_name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_COL_NAME_LENGTH</span><span class="p">)</span>
<a id="__codelineno-0-819" name="__codelineno-0-819"></a>        <span class="p">]</span>
<a id="__codelineno-0-820" name="__codelineno-0-820"></a>
<a id="__codelineno-0-821" name="__codelineno-0-821"></a>        <span class="k">if</span> <span class="n">new_col_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[:</span><span class="n">idx</span><span class="p">]:</span>
<a id="__codelineno-0-822" name="__codelineno-0-822"></a>            <span class="n">headers</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_col_name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.CensusDataRetriever.translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">table</span><span class="p">,</span> <span class="n">year</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Gets the label name for a table and row for the acs5 profile surveys.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>headers</code></td>
          <td>
                <code>list[str]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>headers</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>table</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>table</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>year</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>year</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-910">910</a></span>
<span class="normal"><a href="#__codelineno-0-911">911</a></span>
<span class="normal"><a href="#__codelineno-0-912">912</a></span>
<span class="normal"><a href="#__codelineno-0-913">913</a></span>
<span class="normal"><a href="#__codelineno-0-914">914</a></span>
<span class="normal"><a href="#__codelineno-0-915">915</a></span>
<span class="normal"><a href="#__codelineno-0-916">916</a></span>
<span class="normal"><a href="#__codelineno-0-917">917</a></span>
<span class="normal"><a href="#__codelineno-0-918">918</a></span>
<span class="normal"><a href="#__codelineno-0-919">919</a></span>
<span class="normal"><a href="#__codelineno-0-920">920</a></span>
<span class="normal"><a href="#__codelineno-0-921">921</a></span>
<span class="normal"><a href="#__codelineno-0-922">922</a></span>
<span class="normal"><a href="#__codelineno-0-923">923</a></span>
<span class="normal"><a href="#__codelineno-0-924">924</a></span>
<span class="normal"><a href="#__codelineno-0-925">925</a></span>
<span class="normal"><a href="#__codelineno-0-926">926</a></span>
<span class="normal"><a href="#__codelineno-0-927">927</a></span>
<span class="normal"><a href="#__codelineno-0-928">928</a></span>
<span class="normal"><a href="#__codelineno-0-929">929</a></span>
<span class="normal"><a href="#__codelineno-0-930">930</a></span>
<span class="normal"><a href="#__codelineno-0-931">931</a></span>
<span class="normal"><a href="#__codelineno-0-932">932</a></span>
<span class="normal"><a href="#__codelineno-0-933">933</a></span>
<span class="normal"><a href="#__codelineno-0-934">934</a></span>
<span class="normal"><a href="#__codelineno-0-935">935</a></span>
<span class="normal"><a href="#__codelineno-0-936">936</a></span>
<span class="normal"><a href="#__codelineno-0-937">937</a></span>
<span class="normal"><a href="#__codelineno-0-938">938</a></span>
<span class="normal"><a href="#__codelineno-0-939">939</a></span>
<span class="normal"><a href="#__codelineno-0-940">940</a></span>
<span class="normal"><a href="#__codelineno-0-941">941</a></span>
<span class="normal"><a href="#__codelineno-0-942">942</a></span>
<span class="normal"><a href="#__codelineno-0-943">943</a></span>
<span class="normal"><a href="#__codelineno-0-944">944</a></span>
<span class="normal"><a href="#__codelineno-0-945">945</a></span>
<span class="normal"><a href="#__codelineno-0-946">946</a></span>
<span class="normal"><a href="#__codelineno-0-947">947</a></span>
<span class="normal"><a href="#__codelineno-0-948">948</a></span>
<span class="normal"><a href="#__codelineno-0-949">949</a></span>
<span class="normal"><a href="#__codelineno-0-950">950</a></span>
<span class="normal"><a href="#__codelineno-0-951">951</a></span>
<span class="normal"><a href="#__codelineno-0-952">952</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-910" name="__codelineno-0-910"></a><span class="k">def</span> <span class="nf">translate_and_truncate_unique_acs5_subject_groups_to_labels_for_header_list</span><span class="p">(</span>
<a id="__codelineno-0-911" name="__codelineno-0-911"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">table</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">year</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-912" name="__codelineno-0-912"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-913" name="__codelineno-0-913"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets the label name for a table and row for the acs5 profile surveys.</span>
<a id="__codelineno-0-914" name="__codelineno-0-914"></a>
<a id="__codelineno-0-915" name="__codelineno-0-915"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-916" name="__codelineno-0-916"></a><span class="sd">        headers (list[str]): headers</span>
<a id="__codelineno-0-917" name="__codelineno-0-917"></a><span class="sd">        table (str): table</span>
<a id="__codelineno-0-918" name="__codelineno-0-918"></a><span class="sd">        year (str): year</span>
<a id="__codelineno-0-919" name="__codelineno-0-919"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-920" name="__codelineno-0-920"></a>    <span class="c1"># is going to read the file multiple times, save last req as {&quot;table&quot;: req_json[table]...} for this?</span>
<a id="__codelineno-0-921" name="__codelineno-0-921"></a>    <span class="n">groups_to_label_translation_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_acs5_subject_table_to_group_name</span><span class="p">(</span>
<a id="__codelineno-0-922" name="__codelineno-0-922"></a>        <span class="n">table</span><span class="p">,</span> <span class="n">year</span>
<a id="__codelineno-0-923" name="__codelineno-0-923"></a>    <span class="p">)</span>
<a id="__codelineno-0-924" name="__codelineno-0-924"></a>    <span class="k">if</span> <span class="n">groups_to_label_translation_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-925" name="__codelineno-0-925"></a>        <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate headers&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-926" name="__codelineno-0-926"></a>        <span class="k">return</span> <span class="n">groups_to_label_translation_dict</span>
<a id="__codelineno-0-927" name="__codelineno-0-927"></a>
<a id="__codelineno-0-928" name="__codelineno-0-928"></a>    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">header</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">headers</span><span class="p">):</span>
<a id="__codelineno-0-929" name="__codelineno-0-929"></a>        <span class="n">new_col_name_dict</span> <span class="o">=</span> <span class="n">groups_to_label_translation_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
<a id="__codelineno-0-930" name="__codelineno-0-930"></a>        <span class="k">if</span> <span class="n">new_col_name_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-931" name="__codelineno-0-931"></a>            <span class="c1"># returns none if not in dict, means we have custom name and can continue</span>
<a id="__codelineno-0-932" name="__codelineno-0-932"></a>            <span class="k">continue</span>
<a id="__codelineno-0-933" name="__codelineno-0-933"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name_dict</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
<a id="__codelineno-0-934" name="__codelineno-0-934"></a>        <span class="c1"># qgis doesnt allow field names of 80+ chars. massage into form, then cut off</span>
<a id="__codelineno-0-935" name="__codelineno-0-935"></a>        <span class="c1"># delimiter for table subsection</span>
<a id="__codelineno-0-936" name="__codelineno-0-936"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">&quot;!!&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-937" name="__codelineno-0-937"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s+&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-938" name="__codelineno-0-938"></a>        <span class="c1"># easier to read</span>
<a id="__codelineno-0-939" name="__codelineno-0-939"></a>        <span class="n">new_col_name_parts</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span>
<a id="__codelineno-0-940" name="__codelineno-0-940"></a>        <span class="k">for</span> <span class="n">idy</span><span class="p">,</span> <span class="n">no_format</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">):</span>
<a id="__codelineno-0-941" name="__codelineno-0-941"></a>            <span class="n">new_col_name_parts</span><span class="p">[</span><span class="n">idy</span><span class="p">]</span> <span class="o">=</span> <span class="n">no_format</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
<a id="__codelineno-0-942" name="__codelineno-0-942"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_col_name_parts</span><span class="p">)</span>
<a id="__codelineno-0-943" name="__codelineno-0-943"></a>        <span class="c1"># shortenings to fit length requirement</span>
<a id="__codelineno-0-944" name="__codelineno-0-944"></a>        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">replace_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-945" name="__codelineno-0-945"></a>            <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">new_col_name</span><span class="p">)</span>
<a id="__codelineno-0-946" name="__codelineno-0-946"></a>        <span class="c1"># limiter</span>
<a id="__codelineno-0-947" name="__codelineno-0-947"></a>        <span class="n">new_col_name</span> <span class="o">=</span> <span class="n">new_col_name</span><span class="p">[</span>
<a id="__codelineno-0-948" name="__codelineno-0-948"></a>            <span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">new_col_name</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAX_COL_NAME_LENGTH</span><span class="p">)</span>
<a id="__codelineno-0-949" name="__codelineno-0-949"></a>        <span class="p">]</span>
<a id="__codelineno-0-950" name="__codelineno-0-950"></a>
<a id="__codelineno-0-951" name="__codelineno-0-951"></a>        <span class="k">if</span> <span class="n">new_col_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">[:</span><span class="n">idx</span><span class="p">]:</span>
<a id="__codelineno-0-952" name="__codelineno-0-952"></a>            <span class="n">headers</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_col_name</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="backend.secondarydata.EIADataRetriever" class="doc doc-heading">
          <code>EIADataRetriever</code>


</h2>


  <div class="doc doc-contents ">

  
      <p>Interact with the EIA open data API.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>This is the "manual" for this API:
https://www.eia.gov/opendata/pdf/EIA-APIv2-HandsOn-Webinar-11-Jan-23.pdf</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span>
<span class="normal"><a href="#__codelineno-0-607">607</a></span>
<span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="k">class</span> <span class="nc">EIADataRetriever</span><span class="p">:</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Interact with the EIA open data API.</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="sd">        This is the &quot;manual&quot; for this API:</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        https://www.eia.gov/opendata/pdf/EIA-APIv2-HandsOn-Webinar-11-Jan-23.pdf</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a>    <span class="n">HEATING_OIL_STATES_ABBR</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">CT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">DC</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">DE</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">IA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">IL</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">IN</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">KS</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">KY</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MD</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">ME</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MN</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MO</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NC</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">ND</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NE</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NH</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NJ</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NY</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">OH</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">PA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">RI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">SD</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">VA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">VT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">WI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>    <span class="p">}</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">PROPANE_STATES_ABBR</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">AL</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">AR</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">CO</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">CT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">DE</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">FL</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">GA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">IL</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">IN</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">KS</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">KY</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">KY</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MD</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">ME</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MN</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MO</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MS</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">MT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NC</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">ND</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NE</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NH</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NJ</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">NY</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">OH</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">OK</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">PA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">RI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">SD</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">TN</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">TX</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">UT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">VA</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">VT</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="n">sts</span><span class="o">.</span><span class="n">WI</span><span class="o">.</span><span class="n">abbr</span><span class="p">,</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="p">}</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="k">class</span> <span class="nc">HeaterEfficiencies</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Combination of system efficiency and distribution efficiency.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">            Numbers taken from https://www.efficiencymaine.com/at-home/heating-cost-comparison/</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="n">HEAT_PUMP_GEOTHERMAL</span> <span class="o">=</span> <span class="mf">3.69</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="n">HEAT_PUMP_DUCTLESS</span> <span class="o">=</span> <span class="mf">2.7</span>  <span class="c1"># mini split</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>        <span class="n">HEAT_PUMP_DUCTED</span> <span class="o">=</span> <span class="mf">2.16</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="n">BASEBOARD</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="n">KEROSENE_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.87</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="n">PROPANE_BOILER</span> <span class="o">=</span> <span class="mf">0.837</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="n">NG_BOILER</span> <span class="o">=</span> <span class="mf">0.828</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="n">NG_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.81</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>        <span class="n">PROPANE_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.81</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>        <span class="n">OIL_BOILER</span> <span class="o">=</span> <span class="mf">0.783</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>        <span class="n">WOOD_STOVE</span> <span class="o">=</span> <span class="mf">0.75</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="n">PELLET_STOVE</span> <span class="o">=</span> <span class="mf">0.75</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>        <span class="n">NG_FURNACE</span> <span class="o">=</span> <span class="mf">0.744</span>  <span class="c1">#! double check this value</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="n">PROPANE_FURNACE</span> <span class="o">=</span> <span class="mf">0.744</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="n">OIL_FURNACE</span> <span class="o">=</span> <span class="mf">0.704</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="n">PELLET_BOILER</span> <span class="o">=</span> <span class="mf">0.639</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>    <span class="k">class</span> <span class="nc">EnergyType</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>        <span class="n">PROPANE</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="n">HEATING_OIL</span> <span class="o">=</span> <span class="mi">2</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="n">NATURAL_GAS</span> <span class="o">=</span> <span class="mi">3</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="n">ELECTRICITY</span> <span class="o">=</span> <span class="mi">4</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>    <span class="k">class</span> <span class="nc">PetroleumProductTypes</span><span class="p">(</span><span class="n">StrEnum</span><span class="p">):</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>        <span class="n">NATURAL_GAS</span> <span class="o">=</span> <span class="s2">&quot;EPG0&quot;</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>        <span class="n">PROPANE</span> <span class="o">=</span> <span class="s2">&quot;EPLLPA&quot;</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>        <span class="n">HEATING_OIL</span> <span class="o">=</span> <span class="s2">&quot;EPD2F&quot;</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span class="k">class</span> <span class="nc">FuelBTUConversion</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="c1"># https://www.edf.org/sites/default/files/10071_EDF_BottomBarrel_Ch3.pdf</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span class="c1"># https://www.eia.gov/energyexplained/units-and-calculators/british-thermal-units.php</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>        <span class="c1"># https://www.eia.gov/energyexplained/units-and-calculators/</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span class="n">NO1_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">135_000</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>        <span class="n">NO2_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">140_000</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="n">NO4_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">146_000</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="n">NO5_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">144_500</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="n">NO6_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">150_000</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="n">HEATING_OIL_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">138_500</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="n">ELECTRICITY_BTU_PER_KWH</span> <span class="o">=</span> <span class="mf">3_412.14</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="n">NG_BTU_PER_MCT</span> <span class="o">=</span> <span class="mi">1_036_000</span>  <span class="c1"># 1000 cubic feet of gas</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="n">NG_BTU_PER_THERM</span> <span class="o">=</span> <span class="mi">100_000</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>        <span class="n">PROPANE_BTU_PER_GAL</span> <span class="o">=</span> <span class="mi">91_452</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>        <span class="n">WOOD_BTU_PER_CORD</span> <span class="o">=</span> <span class="mi">20_000_000</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">eia_base_url</span> <span class="o">=</span> <span class="s2">&quot;https://api.eia.gov/v2&quot;</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EIA_API_KEY&quot;</span><span class="p">)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="n">log</span><span class="p">(</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>                <span class="s2">&quot;No Census API key found in a .env file in project directory. please request a key at https://www.eia.gov/opendata/register.php&quot;</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>                <span class="s2">&quot;critical&quot;</span><span class="p">,</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>            <span class="p">)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>            <span class="n">exit</span><span class="p">()</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>    <span class="k">def</span> <span class="nf">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">energy_price_dict</span><span class="p">:</span> <span class="nb">dict</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert an energy source&#39;s price per quantity into price per BTU with an efficiency.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">            Efficiency data taken from https://portfoliomanager.energystar.gov/pdf/reference/Thermal%20Conversions.pdf</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">        See also:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">            `EIADataRetriever.HeaterEfficiencies`</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">            energy_price_dict (dict): energy source json</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">            dict: new dictionary with btu centric pricing</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="c1">#! make new function based on burner type/ end usage type</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>        <span class="n">CENTS_IN_DOLLAR</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span class="k">match</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>                <span class="c1"># for loop is done for every case since i dont want to use `eval` or parse a string of division to keep PEMDAS. this is why i dont have an efficiency func yet</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>                    <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>                        <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>                        <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>                    <span class="p">):</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>                        <span class="k">continue</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>                    <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>                        <span class="n">value</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>                        <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">PROPANE_BTU_PER_GAL</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>                            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">PROPANE_FURNACE</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>                        <span class="p">)</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>                        <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>                    <span class="p">)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>                    <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>                        <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>                        <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>                    <span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>                        <span class="k">continue</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>                    <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>                        <span class="n">value</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>                        <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">NG_BTU_PER_MCT</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>                            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">NG_FURNACE</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>                        <span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>                        <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>                    <span class="p">)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>                    <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>                        <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>                        <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>                    <span class="p">):</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>                        <span class="k">continue</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>                    <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>                        <span class="n">value</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>                        <span class="o">/</span> <span class="n">CENTS_IN_DOLLAR</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>                        <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">ELECTRICITY_BTU_PER_KWH</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>                            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">HEAT_PUMP_DUCTED</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>                        <span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>                        <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>                    <span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>                    <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>                        <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>                        <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>                    <span class="p">):</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                        <span class="k">continue</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>                    <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>                        <span class="n">value</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>                        <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">HEATING_OIL_BTU_PER_GAL</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>                            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">OIL_BOILER</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>                        <span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>                        <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>                    <span class="p">)</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>                <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate dict to btu per price.&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>        <span class="k">return</span> <span class="n">energy_price_dict</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>    <span class="c1"># api to dict handler Helpers</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>    <span class="k">def</span> <span class="nf">price_dict_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">eia_json</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean JSON data returned by EIA&#39;s API.</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">            eia_json (dict): the response JSON</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">            energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">            state (str): the state</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">            dict[str, str | EnergyType | float]: cleaned JSON</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="c1"># price key is different for electricity</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span class="n">accessor</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span class="k">if</span> <span class="s2">&quot;product&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">eia_json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>            <span class="n">accessor</span> <span class="o">=</span> <span class="s2">&quot;price&quot;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;period&quot;</span><span class="p">]:</span> <span class="n">entry</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">accessor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">eia_json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>        <span class="p">}</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>        <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_type</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>        <span class="k">return</span> <span class="n">result_dict</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span class="k">def</span> <span class="nf">price_df_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">eia_df</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Clean DataFrame data consisting of EIA API data.</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">            eia_df (pl.DataFrame): the DataFrame to clean</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">            energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">            state (str): the state</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">            dict[str, str|EnergyType|float]: the dict</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">eia_df</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>            <span class="n">year_month</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">)</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>            <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>                <span class="n">result_dict</span><span class="p">[</span><span class="n">year_month</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>        <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_type</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>        <span class="k">return</span> <span class="n">result_dict</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a>    <span class="c1"># api to dict handler</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">def</span> <span class="nf">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">price_struct</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle the different data types that EIA data could be stored in.</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">            price_struct (dict | pl.DataFrame): a data structure containing the year, month, and price info</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">            energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">            state (str): the state</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">            TypeError: raised if the type of `price_struct` is not supported</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">            dict[str, str|EnergyType|float]: the normalized and structured data in dict form</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="k">match</span> <span class="n">price_struct</span><span class="p">:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>            <span class="k">case</span> <span class="nb">dict</span><span class="p">():</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_dict_to_clean_dict</span><span class="p">(</span><span class="n">price_struct</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>            <span class="k">case</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">():</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_df_to_clean_dict</span><span class="p">(</span><span class="n">price_struct</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Type not supported: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">energy_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>    <span class="c1"># api interaction</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>    <span class="k">def</span> <span class="nf">monthly_electricity_price_per_kwh</span><span class="p">(</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average monthly energy price.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">            Data is returned in cents/KWh.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">            state (str): the 2 character postal code of a state</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">            start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">            end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">            dict: the dictionary in `year-month: price` form</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eia_base_url</span><span class="si">}</span><span class="s2">/electricity/retail-sales/data/?frequency=monthly&amp;data[0]=price&amp;facets[stateid][]=</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[sectorid][]=RES&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>        <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>        <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>        <span class="k">return</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>    <span class="k">def</span> <span class="nf">monthly_ng_price_per_mcf</span><span class="p">(</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average natural gas price.</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">            Data is returned in dollars per mega cubic feet.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">            state (str): the 2 character postal code of a state</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">            start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">            end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">            dict: _description_</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>        <span class="c1"># $/mcf</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/natural-gas/pri/sum/data/?frequency=monthly&amp;data[0]=value&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[process][]=PRS&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="k">return</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>    <span class="k">def</span> <span class="nf">monthly_heating_season_heating_oil_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average heating oil price.</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">            Data returned is in dollars per gallon.</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">            Only these states are tracked, and only for the months October through March:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">                * CT</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">                * DC</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">                * DE</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">                * IA</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">                * IL</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">                * IN</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">                * KS</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">                * KY</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">                * MA</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">                * MD</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">                * ME</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">                * MI</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">                * MN</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">                * MO</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">                * NC</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">                * ND</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">                * NE</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">                * NH</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">                * NJ</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">                * NY</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">                * OH</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">                * PA</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">                * RI</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">                * SD</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">                * VA</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">                * VT</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="sd">                * WI</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">            state (str): 2 char postal code</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">            start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">            end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><span class="sd">            dict: _description_</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>        <span class="c1"># heating season is Oct - march, $/gal</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/petroleum/pri/wfr/data/?frequency=weekly&amp;data[0]=value&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[product][]=EPD2F&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>        <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>        <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>        <span class="n">json</span> <span class="o">=</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="c1"># becomes int, so months are sig figs</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">))</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">),</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">),</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>        <span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>        <span class="n">monthly_avg_price</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>            <span class="n">df</span><span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">])</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>            <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">))</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>        <span class="p">)</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>        <span class="k">return</span> <span class="n">monthly_avg_price</span>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>    <span class="k">def</span> <span class="nf">monthly_heating_season_propane_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average propane price in dollars per gal.</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">            Only these states are tracked, and only for the months October through Marc:</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">                * AL</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">                * AR</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">                * CO</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">                * CT</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">                * DE</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">                * FL</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">                * GA</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">                * IL</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">                * IN</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">                * KS</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">                * KY</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">                * KY</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">                * MA</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">                * MD</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">                * ME</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">                * MI</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">                * MN</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">                * MO</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">                * MS</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">                * MT</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">                * NC</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">                * ND</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">                * NE</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">                * NH</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">                * NJ</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">                * NY</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">                * OH</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="sd">                * OK</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">                * PA</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">                * RI</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">                * SD</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">                * TN</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">                * TX</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">                * UT</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">                * VA</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">                * VT</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">                * WI</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">            state (str): 2 character postal code</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">            start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">            end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">            dict: _description_</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>        <span class="c1"># heating season is Oct - march, $/gal</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/petroleum/pri/wfr/data/?frequency=weekly&amp;data[0]=value&amp;facets[process][]=PRS&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[product][]=EPLLPA&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>        <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>        <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>        <span class="n">json</span> <span class="o">=</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>        <span class="c1"># return self.price_json_to_dict(eia_request.json())</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>        <span class="c1"># df = df.with_columns(pl.col(&quot;period&quot;).str.to_date().alias(&quot;period&quot;))</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">))</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">),</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>            <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">),</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>        <span class="p">)</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>        <span class="n">monthly_avg_price</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>            <span class="n">df</span><span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">])</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>            <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">))</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>            <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">)</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>        <span class="p">)</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>        <span class="k">return</span> <span class="n">monthly_avg_price</span>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>    <span class="k">def</span> <span class="nf">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>        <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>        <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>        <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>        <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>        <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the cost per MBTU for the given energy type for the state, over the given period of time. Refer to EIA&#39;s documentation</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">        for changes to data collection during certain years.</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">            energy_type (EnergyType): The energy type</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">            state (str): the 2 character postal abbreviation. Note that for heating oil, only certain states have this information collected</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">            start_date (datetime.date): the date for which to start the search. Inclusive. Not that for heating oil, only heating months will be returned</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">            end_date (datetime.date): the date for which to end the search. Non inclusive</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">            NotImplementedError: Invalid energy type</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">            dict: year-month: price in USD to BTU</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>            <span class="n">state</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">abbr</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>        <span class="k">match</span> <span class="n">energy_type</span><span class="p">:</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="p">:</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_heating_season_propane_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>                            <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>                        <span class="p">),</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>                        <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>                        <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>                    <span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>                <span class="p">)</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="p">:</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_ng_price_per_mcf</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">),</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                        <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>                        <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>                    <span class="p">)</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>                <span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="p">:</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_electricity_price_per_kwh</span><span class="p">(</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>                            <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>                        <span class="p">),</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>                        <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>                        <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>                    <span class="p">)</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>                <span class="p">)</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>            <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="p">:</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_heating_season_heating_oil_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>                            <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>                        <span class="p">),</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>                        <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>                        <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>                    <span class="p">)</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>                <span class="p">)</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>            <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported energy type: </span><span class="si">{</span><span class="n">energy_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-607" name="__codelineno-0-607"></a>
<a id="__codelineno-0-608" name="__codelineno-0-608"></a>    <span class="k">def</span> <span class="nf">monthly_price_per_mbtu_by_energy_type_by_state</span><span class="p">(</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>        <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Get all available energy prices per MBTU, taking efficiency into account, for a state.</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">            Please keep times to within a year. For the non oil and propane, you have to go a month past.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">            state (str): 2 character postal code</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">            start_date (datetime.date): start date</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">            end_date (datetime.date): end date</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">            list[Any]: list of price dicts for available energy types for a state</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>            <span class="n">state</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">abbr</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>        <span class="n">dicts_to_return</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>        <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEATING_OIL_STATES_ABBR</span><span class="p">:</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>            <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>                <span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>            <span class="p">)</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>        <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PROPANE_STATES_ABBR</span><span class="p">:</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>            <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>                <span class="p">)</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>            <span class="p">)</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>        <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>            <span class="p">)</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>        <span class="p">)</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>        <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>            <span class="p">)</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>        <span class="p">)</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>        <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dicts_to_return</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>        <span class="k">return</span> <span class="n">dicts_to_return</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h3 id="backend.secondarydata.EIADataRetriever.HeaterEfficiencies" class="doc doc-heading">
          <code>HeaterEfficiencies</code>


</h3>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><span title="enum.Enum">Enum</span></code></p>

  
      <p>Combination of system efficiency and distribution efficiency.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Numbers taken from https://www.efficiencymaine.com/at-home/heating-cost-comparison/</p>
</details>
            <details class="quote">
              <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="k">class</span> <span class="nc">HeaterEfficiencies</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Combination of system efficiency and distribution efficiency.</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        Numbers taken from https://www.efficiencymaine.com/at-home/heating-cost-comparison/</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="n">HEAT_PUMP_GEOTHERMAL</span> <span class="o">=</span> <span class="mf">3.69</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="n">HEAT_PUMP_DUCTLESS</span> <span class="o">=</span> <span class="mf">2.7</span>  <span class="c1"># mini split</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>    <span class="n">HEAT_PUMP_DUCTED</span> <span class="o">=</span> <span class="mf">2.16</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="n">BASEBOARD</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="n">KEROSENE_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.87</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="n">PROPANE_BOILER</span> <span class="o">=</span> <span class="mf">0.837</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>    <span class="n">NG_BOILER</span> <span class="o">=</span> <span class="mf">0.828</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>    <span class="n">NG_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.81</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="n">PROPANE_ROOM_HEATER</span> <span class="o">=</span> <span class="mf">0.81</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>    <span class="n">OIL_BOILER</span> <span class="o">=</span> <span class="mf">0.783</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>    <span class="n">WOOD_STOVE</span> <span class="o">=</span> <span class="mf">0.75</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>    <span class="n">PELLET_STOVE</span> <span class="o">=</span> <span class="mf">0.75</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="n">NG_FURNACE</span> <span class="o">=</span> <span class="mf">0.744</span>  <span class="c1">#! double check this value</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="n">PROPANE_FURNACE</span> <span class="o">=</span> <span class="mf">0.744</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="n">OIL_FURNACE</span> <span class="o">=</span> <span class="mf">0.704</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>    <span class="n">PELLET_BOILER</span> <span class="o">=</span> <span class="mf">0.639</span>
</code></pre></div></td></tr></table></div>
            </details>

  

  <div class="doc doc-children">











  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_electricity_price_per_kwh" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_electricity_price_per_kwh</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a state's average monthly energy price.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Data is returned in cents/KWh.</p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the 2 character postal code of a state</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the start date, inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the end date, non inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code>dict[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the dictionary in <code>year-month: price</code> form</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-351" name="__codelineno-0-351"></a><span class="k">def</span> <span class="nf">monthly_electricity_price_per_kwh</span><span class="p">(</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average monthly energy price.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">        Data is returned in cents/KWh.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a><span class="sd">        state (str): the 2 character postal code of a state</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a><span class="sd">        start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a><span class="sd">        end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a><span class="sd">        dict: the dictionary in `year-month: price` form</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">eia_base_url</span><span class="si">}</span><span class="s2">/electricity/retail-sales/data/?frequency=monthly&amp;data[0]=price&amp;facets[stateid][]=</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[sectorid][]=RES&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>    <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>    <span class="k">return</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_heating_season_heating_oil_price_per_gal" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_heating_season_heating_oil_price_per_gal</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a state's average heating oil price.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Data returned is in dollars per gallon.</p>
<p>Only these states are tracked, and only for the months October through March:
    * CT
    * DC
    * DE
    * IA
    * IL
    * IN
    * KS
    * KY
    * MA
    * MD
    * ME
    * MI
    * MN
    * MO
    * NC
    * ND
    * NE
    * NH
    * NJ
    * NY
    * OH
    * PA
    * RI
    * SD
    * VA
    * VT
    * WI</p>
</details>      <p>Args:
    state (str): 2 char postal code
    start_date (datetime.date): the start date, inclusive
    end_date (datetime.date): the end date, non inclusive</p>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span>
<span class="normal"><a href="#__codelineno-0-412">412</a></span>
<span class="normal"><a href="#__codelineno-0-413">413</a></span>
<span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span>
<span class="normal"><a href="#__codelineno-0-423">423</a></span>
<span class="normal"><a href="#__codelineno-0-424">424</a></span>
<span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span>
<span class="normal"><a href="#__codelineno-0-456">456</a></span>
<span class="normal"><a href="#__codelineno-0-457">457</a></span>
<span class="normal"><a href="#__codelineno-0-458">458</a></span>
<span class="normal"><a href="#__codelineno-0-459">459</a></span>
<span class="normal"><a href="#__codelineno-0-460">460</a></span>
<span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-398" name="__codelineno-0-398"></a><span class="k">def</span> <span class="nf">monthly_heating_season_heating_oil_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average heating oil price.</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a><span class="sd">        Data returned is in dollars per gallon.</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a><span class="sd">        Only these states are tracked, and only for the months October through March:</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a><span class="sd">            * CT</span>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a><span class="sd">            * DC</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a><span class="sd">            * DE</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a><span class="sd">            * IA</span>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a><span class="sd">            * IL</span>
<a id="__codelineno-0-412" name="__codelineno-0-412"></a><span class="sd">            * IN</span>
<a id="__codelineno-0-413" name="__codelineno-0-413"></a><span class="sd">            * KS</span>
<a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="sd">            * KY</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="sd">            * MA</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="sd">            * MD</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a><span class="sd">            * ME</span>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">            * MI</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">            * MN</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">            * MO</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a><span class="sd">            * NC</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a><span class="sd">            * ND</span>
<a id="__codelineno-0-423" name="__codelineno-0-423"></a><span class="sd">            * NE</span>
<a id="__codelineno-0-424" name="__codelineno-0-424"></a><span class="sd">            * NH</span>
<a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="sd">            * NJ</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="sd">            * NY</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="sd">            * OH</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a><span class="sd">            * PA</span>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">            * RI</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">            * SD</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">            * VA</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a><span class="sd">            * VT</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a><span class="sd">            * WI</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a><span class="sd">        state (str): 2 char postal code</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a><span class="sd">        start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a><span class="sd">        end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a><span class="sd">        dict: _description_</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>    <span class="c1"># heating season is Oct - march, $/gal</span>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/petroleum/pri/wfr/data/?frequency=weekly&amp;data[0]=value&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[product][]=EPD2F&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>    <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>    <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>    <span class="n">json</span> <span class="o">=</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>    <span class="c1"># becomes int, so months are sig figs</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">))</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">),</span>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">),</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="p">)</span>
<a id="__codelineno-0-456" name="__codelineno-0-456"></a>
<a id="__codelineno-0-457" name="__codelineno-0-457"></a>    <span class="n">monthly_avg_price</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-458" name="__codelineno-0-458"></a>        <span class="n">df</span><span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">])</span>
<a id="__codelineno-0-459" name="__codelineno-0-459"></a>        <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">))</span>
<a id="__codelineno-0-460" name="__codelineno-0-460"></a>        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">)</span>
<a id="__codelineno-0-461" name="__codelineno-0-461"></a>    <span class="p">)</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>    <span class="k">return</span> <span class="n">monthly_avg_price</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_heating_season_propane_price_per_gal" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_heating_season_propane_price_per_gal</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a state's average propane price in dollars per gal.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Only these states are tracked, and only for the months October through Marc:
    * AL
    * AR
    * CO
    * CT
    * DE
    * FL
    * GA
    * IL
    * IN
    * KS
    * KY
    * KY
    * MA
    * MD
    * ME
    * MI
    * MN
    * MO
    * MS
    * MT
    * NC
    * ND
    * NE
    * NH
    * NJ
    * NY
    * OH
    * OK
    * PA
    * RI
    * SD
    * TN
    * TX
    * UT
    * VA
    * VT
    * WI</p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>2 character postal code</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the start date, inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the end date, non inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-465" name="__codelineno-0-465"></a><span class="k">def</span> <span class="nf">monthly_heating_season_propane_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average propane price in dollars per gal.</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">        Only these states are tracked, and only for the months October through Marc:</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a><span class="sd">            * AL</span>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">            * AR</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">            * CO</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">            * CT</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">            * DE</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">            * FL</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a><span class="sd">            * GA</span>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">            * IL</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">            * IN</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a><span class="sd">            * KS</span>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">            * KY</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">            * KY</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a><span class="sd">            * MA</span>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">            * MD</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a><span class="sd">            * ME</span>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">            * MI</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">            * MN</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">            * MO</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">            * MS</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a><span class="sd">            * MT</span>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">            * NC</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">            * ND</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">            * NE</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">            * NH</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">            * NJ</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a><span class="sd">            * NY</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a><span class="sd">            * OH</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a><span class="sd">            * OK</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a><span class="sd">            * PA</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a><span class="sd">            * RI</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a><span class="sd">            * SD</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a><span class="sd">            * TN</span>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a><span class="sd">            * TX</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a><span class="sd">            * UT</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a><span class="sd">            * VA</span>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a><span class="sd">            * VT</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a><span class="sd">            * WI</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a><span class="sd">        state (str): 2 character postal code</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a><span class="sd">        start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a><span class="sd">        end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a><span class="sd">        dict: _description_</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>    <span class="c1"># heating season is Oct - march, $/gal</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/petroleum/pri/wfr/data/?frequency=weekly&amp;data[0]=value&amp;facets[process][]=PRS&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[product][]=EPLLPA&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>    <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>    <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>    <span class="n">json</span> <span class="o">=</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>    <span class="c1"># return self.price_json_to_dict(eia_request.json())</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>    <span class="c1"># df = df.with_columns(pl.col(&quot;period&quot;).str.to_date().alias(&quot;period&quot;))</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">Date</span><span class="p">))</span>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">with_columns</span><span class="p">(</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">),</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>        <span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;period&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">),</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>    <span class="p">)</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>    <span class="n">monthly_avg_price</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>        <span class="n">df</span><span class="o">.</span><span class="n">group_by</span><span class="p">([</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">])</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>        <span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="n">pl</span><span class="o">.</span><span class="n">col</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">alias</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">))</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>        <span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">)</span>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>    <span class="p">)</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>    <span class="k">return</span> <span class="n">monthly_avg_price</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_ng_price_per_mcf" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_ng_price_per_mcf</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get a state's average natural gas price.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Data is returned in dollars per mega cubic feet.</p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the 2 character postal code of a state</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the start date, inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the end date, non inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code>dict[str, <span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p><em>description</em></p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-374" name="__codelineno-0-374"></a><span class="k">def</span> <span class="nf">monthly_ng_price_per_mcf</span><span class="p">(</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get a state&#39;s average natural gas price.</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a><span class="sd">        Data is returned in dollars per mega cubic feet.</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">        state (str): the 2 character postal code of a state</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">        start_date (datetime.date): the start date, inclusive</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">        end_date (datetime.date): the end date, non inclusive</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">        dict: _description_</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>    <span class="c1"># $/mcf</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://api.eia.gov/v2/natural-gas/pri/sum/data/?frequency=monthly&amp;data[0]=value&amp;facets[duoarea][]=S</span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2">&amp;facets[process][]=PRS&amp;start=</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">start_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;end=</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">year</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">end_date</span><span class="o">.</span><span class="n">month</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&amp;sort[0][column]=period&amp;sort[0][direction]=asc&amp;api_key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">api_key</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>    <span class="n">eia_request</span> <span class="o">=</span> <span class="n">req_get_wrapper</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>    <span class="n">eia_request</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>    <span class="k">return</span> <span class="n">eia_request</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_price_per_mbtu_by_energy_type" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span><span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get the cost per MBTU for the given energy type for the state, over the given period of time. Refer to EIA's documentation
for changes to data collection during certain years.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>energy_type</code></td>
          <td>
                <code><span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>The energy type</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the 2 character postal abbreviation. Note that for heating oil, only certain states have this information collected</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the date for which to start the search. Inclusive. Not that for heating oil, only heating months will be returned</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the date for which to end the search. Non inclusive</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>NotImplementedError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>Invalid energy type</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code>dict[str, str | <span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span> | float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>year-month: price in USD to BTU</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span>
<span class="normal"><a href="#__codelineno-0-551">551</a></span>
<span class="normal"><a href="#__codelineno-0-552">552</a></span>
<span class="normal"><a href="#__codelineno-0-553">553</a></span>
<span class="normal"><a href="#__codelineno-0-554">554</a></span>
<span class="normal"><a href="#__codelineno-0-555">555</a></span>
<span class="normal"><a href="#__codelineno-0-556">556</a></span>
<span class="normal"><a href="#__codelineno-0-557">557</a></span>
<span class="normal"><a href="#__codelineno-0-558">558</a></span>
<span class="normal"><a href="#__codelineno-0-559">559</a></span>
<span class="normal"><a href="#__codelineno-0-560">560</a></span>
<span class="normal"><a href="#__codelineno-0-561">561</a></span>
<span class="normal"><a href="#__codelineno-0-562">562</a></span>
<span class="normal"><a href="#__codelineno-0-563">563</a></span>
<span class="normal"><a href="#__codelineno-0-564">564</a></span>
<span class="normal"><a href="#__codelineno-0-565">565</a></span>
<span class="normal"><a href="#__codelineno-0-566">566</a></span>
<span class="normal"><a href="#__codelineno-0-567">567</a></span>
<span class="normal"><a href="#__codelineno-0-568">568</a></span>
<span class="normal"><a href="#__codelineno-0-569">569</a></span>
<span class="normal"><a href="#__codelineno-0-570">570</a></span>
<span class="normal"><a href="#__codelineno-0-571">571</a></span>
<span class="normal"><a href="#__codelineno-0-572">572</a></span>
<span class="normal"><a href="#__codelineno-0-573">573</a></span>
<span class="normal"><a href="#__codelineno-0-574">574</a></span>
<span class="normal"><a href="#__codelineno-0-575">575</a></span>
<span class="normal"><a href="#__codelineno-0-576">576</a></span>
<span class="normal"><a href="#__codelineno-0-577">577</a></span>
<span class="normal"><a href="#__codelineno-0-578">578</a></span>
<span class="normal"><a href="#__codelineno-0-579">579</a></span>
<span class="normal"><a href="#__codelineno-0-580">580</a></span>
<span class="normal"><a href="#__codelineno-0-581">581</a></span>
<span class="normal"><a href="#__codelineno-0-582">582</a></span>
<span class="normal"><a href="#__codelineno-0-583">583</a></span>
<span class="normal"><a href="#__codelineno-0-584">584</a></span>
<span class="normal"><a href="#__codelineno-0-585">585</a></span>
<span class="normal"><a href="#__codelineno-0-586">586</a></span>
<span class="normal"><a href="#__codelineno-0-587">587</a></span>
<span class="normal"><a href="#__codelineno-0-588">588</a></span>
<span class="normal"><a href="#__codelineno-0-589">589</a></span>
<span class="normal"><a href="#__codelineno-0-590">590</a></span>
<span class="normal"><a href="#__codelineno-0-591">591</a></span>
<span class="normal"><a href="#__codelineno-0-592">592</a></span>
<span class="normal"><a href="#__codelineno-0-593">593</a></span>
<span class="normal"><a href="#__codelineno-0-594">594</a></span>
<span class="normal"><a href="#__codelineno-0-595">595</a></span>
<span class="normal"><a href="#__codelineno-0-596">596</a></span>
<span class="normal"><a href="#__codelineno-0-597">597</a></span>
<span class="normal"><a href="#__codelineno-0-598">598</a></span>
<span class="normal"><a href="#__codelineno-0-599">599</a></span>
<span class="normal"><a href="#__codelineno-0-600">600</a></span>
<span class="normal"><a href="#__codelineno-0-601">601</a></span>
<span class="normal"><a href="#__codelineno-0-602">602</a></span>
<span class="normal"><a href="#__codelineno-0-603">603</a></span>
<span class="normal"><a href="#__codelineno-0-604">604</a></span>
<span class="normal"><a href="#__codelineno-0-605">605</a></span>
<span class="normal"><a href="#__codelineno-0-606">606</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-542" name="__codelineno-0-542"></a><span class="k">def</span> <span class="nf">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>    <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>    <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>    <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>    <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the cost per MBTU for the given energy type for the state, over the given period of time. Refer to EIA&#39;s documentation</span>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a><span class="sd">    for changes to data collection during certain years.</span>
<a id="__codelineno-0-551" name="__codelineno-0-551"></a>
<a id="__codelineno-0-552" name="__codelineno-0-552"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-553" name="__codelineno-0-553"></a><span class="sd">        energy_type (EnergyType): The energy type</span>
<a id="__codelineno-0-554" name="__codelineno-0-554"></a><span class="sd">        state (str): the 2 character postal abbreviation. Note that for heating oil, only certain states have this information collected</span>
<a id="__codelineno-0-555" name="__codelineno-0-555"></a><span class="sd">        start_date (datetime.date): the date for which to start the search. Inclusive. Not that for heating oil, only heating months will be returned</span>
<a id="__codelineno-0-556" name="__codelineno-0-556"></a><span class="sd">        end_date (datetime.date): the date for which to end the search. Non inclusive</span>
<a id="__codelineno-0-557" name="__codelineno-0-557"></a>
<a id="__codelineno-0-558" name="__codelineno-0-558"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-559" name="__codelineno-0-559"></a><span class="sd">        NotImplementedError: Invalid energy type</span>
<a id="__codelineno-0-560" name="__codelineno-0-560"></a>
<a id="__codelineno-0-561" name="__codelineno-0-561"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-562" name="__codelineno-0-562"></a><span class="sd">        dict: year-month: price in USD to BTU</span>
<a id="__codelineno-0-563" name="__codelineno-0-563"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-564" name="__codelineno-0-564"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-565" name="__codelineno-0-565"></a>        <span class="n">state</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">abbr</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-566" name="__codelineno-0-566"></a>    <span class="k">match</span> <span class="n">energy_type</span><span class="p">:</span>
<a id="__codelineno-0-567" name="__codelineno-0-567"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="p">:</span>
<a id="__codelineno-0-568" name="__codelineno-0-568"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-569" name="__codelineno-0-569"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-570" name="__codelineno-0-570"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">monthly_heating_season_propane_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-571" name="__codelineno-0-571"></a>                        <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-572" name="__codelineno-0-572"></a>                    <span class="p">),</span>
<a id="__codelineno-0-573" name="__codelineno-0-573"></a>                    <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-574" name="__codelineno-0-574"></a>                    <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-575" name="__codelineno-0-575"></a>                <span class="p">)</span>
<a id="__codelineno-0-576" name="__codelineno-0-576"></a>            <span class="p">)</span>
<a id="__codelineno-0-577" name="__codelineno-0-577"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="p">:</span>
<a id="__codelineno-0-578" name="__codelineno-0-578"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-579" name="__codelineno-0-579"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-580" name="__codelineno-0-580"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">monthly_ng_price_per_mcf</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">),</span>
<a id="__codelineno-0-581" name="__codelineno-0-581"></a>                    <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-582" name="__codelineno-0-582"></a>                    <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-583" name="__codelineno-0-583"></a>                <span class="p">)</span>
<a id="__codelineno-0-584" name="__codelineno-0-584"></a>            <span class="p">)</span>
<a id="__codelineno-0-585" name="__codelineno-0-585"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="p">:</span>
<a id="__codelineno-0-586" name="__codelineno-0-586"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-587" name="__codelineno-0-587"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-588" name="__codelineno-0-588"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">monthly_electricity_price_per_kwh</span><span class="p">(</span>
<a id="__codelineno-0-589" name="__codelineno-0-589"></a>                        <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-590" name="__codelineno-0-590"></a>                    <span class="p">),</span>
<a id="__codelineno-0-591" name="__codelineno-0-591"></a>                    <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-592" name="__codelineno-0-592"></a>                    <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-593" name="__codelineno-0-593"></a>                <span class="p">)</span>
<a id="__codelineno-0-594" name="__codelineno-0-594"></a>            <span class="p">)</span>
<a id="__codelineno-0-595" name="__codelineno-0-595"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="p">:</span>
<a id="__codelineno-0-596" name="__codelineno-0-596"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-597" name="__codelineno-0-597"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-598" name="__codelineno-0-598"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">monthly_heating_season_heating_oil_price_per_gal</span><span class="p">(</span>
<a id="__codelineno-0-599" name="__codelineno-0-599"></a>                        <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-600" name="__codelineno-0-600"></a>                    <span class="p">),</span>
<a id="__codelineno-0-601" name="__codelineno-0-601"></a>                    <span class="n">energy_type</span><span class="p">,</span>
<a id="__codelineno-0-602" name="__codelineno-0-602"></a>                    <span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-603" name="__codelineno-0-603"></a>                <span class="p">)</span>
<a id="__codelineno-0-604" name="__codelineno-0-604"></a>            <span class="p">)</span>
<a id="__codelineno-0-605" name="__codelineno-0-605"></a>        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-606" name="__codelineno-0-606"></a>            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported energy type: </span><span class="si">{</span><span class="n">energy_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.monthly_price_per_mbtu_by_energy_type_by_state" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">monthly_price_per_mbtu_by_energy_type_by_state</span><span class="p">(</span><span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get all available energy prices per MBTU, taking efficiency into account, for a state.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Please keep times to within a year. For the non oil and propane, you have to go a month past.</p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>2 character postal code</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>start_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>start date</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>end_date</code></td>
          <td>
                <code><span title="datetime.date">date</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>end date</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>list[<span title="typing.Any">Any</span>]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>list[Any]: list of price dicts for available energy types for a state</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-608">608</a></span>
<span class="normal"><a href="#__codelineno-0-609">609</a></span>
<span class="normal"><a href="#__codelineno-0-610">610</a></span>
<span class="normal"><a href="#__codelineno-0-611">611</a></span>
<span class="normal"><a href="#__codelineno-0-612">612</a></span>
<span class="normal"><a href="#__codelineno-0-613">613</a></span>
<span class="normal"><a href="#__codelineno-0-614">614</a></span>
<span class="normal"><a href="#__codelineno-0-615">615</a></span>
<span class="normal"><a href="#__codelineno-0-616">616</a></span>
<span class="normal"><a href="#__codelineno-0-617">617</a></span>
<span class="normal"><a href="#__codelineno-0-618">618</a></span>
<span class="normal"><a href="#__codelineno-0-619">619</a></span>
<span class="normal"><a href="#__codelineno-0-620">620</a></span>
<span class="normal"><a href="#__codelineno-0-621">621</a></span>
<span class="normal"><a href="#__codelineno-0-622">622</a></span>
<span class="normal"><a href="#__codelineno-0-623">623</a></span>
<span class="normal"><a href="#__codelineno-0-624">624</a></span>
<span class="normal"><a href="#__codelineno-0-625">625</a></span>
<span class="normal"><a href="#__codelineno-0-626">626</a></span>
<span class="normal"><a href="#__codelineno-0-627">627</a></span>
<span class="normal"><a href="#__codelineno-0-628">628</a></span>
<span class="normal"><a href="#__codelineno-0-629">629</a></span>
<span class="normal"><a href="#__codelineno-0-630">630</a></span>
<span class="normal"><a href="#__codelineno-0-631">631</a></span>
<span class="normal"><a href="#__codelineno-0-632">632</a></span>
<span class="normal"><a href="#__codelineno-0-633">633</a></span>
<span class="normal"><a href="#__codelineno-0-634">634</a></span>
<span class="normal"><a href="#__codelineno-0-635">635</a></span>
<span class="normal"><a href="#__codelineno-0-636">636</a></span>
<span class="normal"><a href="#__codelineno-0-637">637</a></span>
<span class="normal"><a href="#__codelineno-0-638">638</a></span>
<span class="normal"><a href="#__codelineno-0-639">639</a></span>
<span class="normal"><a href="#__codelineno-0-640">640</a></span>
<span class="normal"><a href="#__codelineno-0-641">641</a></span>
<span class="normal"><a href="#__codelineno-0-642">642</a></span>
<span class="normal"><a href="#__codelineno-0-643">643</a></span>
<span class="normal"><a href="#__codelineno-0-644">644</a></span>
<span class="normal"><a href="#__codelineno-0-645">645</a></span>
<span class="normal"><a href="#__codelineno-0-646">646</a></span>
<span class="normal"><a href="#__codelineno-0-647">647</a></span>
<span class="normal"><a href="#__codelineno-0-648">648</a></span>
<span class="normal"><a href="#__codelineno-0-649">649</a></span>
<span class="normal"><a href="#__codelineno-0-650">650</a></span>
<span class="normal"><a href="#__codelineno-0-651">651</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-608" name="__codelineno-0-608"></a><span class="k">def</span> <span class="nf">monthly_price_per_mbtu_by_energy_type_by_state</span><span class="p">(</span>
<a id="__codelineno-0-609" name="__codelineno-0-609"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">end_date</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span>
<a id="__codelineno-0-610" name="__codelineno-0-610"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<a id="__codelineno-0-611" name="__codelineno-0-611"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get all available energy prices per MBTU, taking efficiency into account, for a state.</span>
<a id="__codelineno-0-612" name="__codelineno-0-612"></a>
<a id="__codelineno-0-613" name="__codelineno-0-613"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-614" name="__codelineno-0-614"></a><span class="sd">        Please keep times to within a year. For the non oil and propane, you have to go a month past.</span>
<a id="__codelineno-0-615" name="__codelineno-0-615"></a>
<a id="__codelineno-0-616" name="__codelineno-0-616"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-617" name="__codelineno-0-617"></a><span class="sd">        state (str): 2 character postal code</span>
<a id="__codelineno-0-618" name="__codelineno-0-618"></a><span class="sd">        start_date (datetime.date): start date</span>
<a id="__codelineno-0-619" name="__codelineno-0-619"></a><span class="sd">        end_date (datetime.date): end date</span>
<a id="__codelineno-0-620" name="__codelineno-0-620"></a>
<a id="__codelineno-0-621" name="__codelineno-0-621"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-622" name="__codelineno-0-622"></a><span class="sd">        list[Any]: list of price dicts for available energy types for a state</span>
<a id="__codelineno-0-623" name="__codelineno-0-623"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-624" name="__codelineno-0-624"></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-0-625" name="__codelineno-0-625"></a>        <span class="n">state</span> <span class="o">=</span> <span class="n">sts</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="n">state</span><span class="p">)</span><span class="o">.</span><span class="n">abbr</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-626" name="__codelineno-0-626"></a>
<a id="__codelineno-0-627" name="__codelineno-0-627"></a>    <span class="n">dicts_to_return</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-628" name="__codelineno-0-628"></a>    <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">HEATING_OIL_STATES_ABBR</span><span class="p">:</span>
<a id="__codelineno-0-629" name="__codelineno-0-629"></a>        <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-630" name="__codelineno-0-630"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-631" name="__codelineno-0-631"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-632" name="__codelineno-0-632"></a>            <span class="p">)</span>
<a id="__codelineno-0-633" name="__codelineno-0-633"></a>        <span class="p">)</span>
<a id="__codelineno-0-634" name="__codelineno-0-634"></a>    <span class="k">if</span> <span class="n">state</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PROPANE_STATES_ABBR</span><span class="p">:</span>
<a id="__codelineno-0-635" name="__codelineno-0-635"></a>        <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-636" name="__codelineno-0-636"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-637" name="__codelineno-0-637"></a>                <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-638" name="__codelineno-0-638"></a>            <span class="p">)</span>
<a id="__codelineno-0-639" name="__codelineno-0-639"></a>        <span class="p">)</span>
<a id="__codelineno-0-640" name="__codelineno-0-640"></a>    <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-641" name="__codelineno-0-641"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-642" name="__codelineno-0-642"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-643" name="__codelineno-0-643"></a>        <span class="p">)</span>
<a id="__codelineno-0-644" name="__codelineno-0-644"></a>    <span class="p">)</span>
<a id="__codelineno-0-645" name="__codelineno-0-645"></a>    <span class="n">dicts_to_return</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
<a id="__codelineno-0-646" name="__codelineno-0-646"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">monthly_price_per_mbtu_by_energy_type</span><span class="p">(</span>
<a id="__codelineno-0-647" name="__codelineno-0-647"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span>
<a id="__codelineno-0-648" name="__codelineno-0-648"></a>        <span class="p">)</span>
<a id="__codelineno-0-649" name="__codelineno-0-649"></a>    <span class="p">)</span>
<a id="__codelineno-0-650" name="__codelineno-0-650"></a>    <span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dicts_to_return</span><span class="w"> </span><span class="si">= }</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">)</span>
<a id="__codelineno-0-651" name="__codelineno-0-651"></a>    <span class="k">return</span> <span class="n">dicts_to_return</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.price_df_to_clean_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">price_df_to_clean_dict</span><span class="p">(</span><span class="n">eia_df</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Clean DataFrame data consisting of EIA API data.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>eia_df</code></td>
          <td>
                <code><span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the DataFrame to clean</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>energy_type</code></td>
          <td>
                <code><span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the energy type</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the state</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, str | <span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span> | float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dict[str, str|EnergyType|float]: the dict</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="k">def</span> <span class="nf">price_df_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">eia_df</span><span class="p">:</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Clean DataFrame data consisting of EIA API data.</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a><span class="sd">        eia_df (pl.DataFrame): the DataFrame to clean</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">        energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        state (str): the state</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        dict[str, str|EnergyType|float]: the dict</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>    <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">eia_df</span><span class="o">.</span><span class="n">rows</span><span class="p">(</span><span class="n">named</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="n">year_month</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;month&quot;</span><span class="p">)</span><span class="si">:</span><span class="s2">02</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>        <span class="k">if</span> <span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>            <span class="n">result_dict</span><span class="p">[</span><span class="n">year_month</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;monthly_avg_price&quot;</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>    <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_type</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>    <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a>    <span class="k">return</span> <span class="n">result_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.price_dict_to_clean_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">price_dict_to_clean_dict</span><span class="p">(</span><span class="n">eia_json</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Clean JSON data returned by EIA's API.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>eia_json</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the response JSON</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>energy_type</code></td>
          <td>
                <code><span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the energy type</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the state</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, str | <span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span> | float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dict[str, str | EnergyType | float]: cleaned JSON</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="k">def</span> <span class="nf">price_dict_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">eia_json</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Clean JSON data returned by EIA&#39;s API.</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a><span class="sd">        eia_json (dict): the response JSON</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a><span class="sd">        energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a><span class="sd">        state (str): the state</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a><span class="sd">        dict[str, str | EnergyType | float]: cleaned JSON</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="c1"># price key is different for electricity</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="n">accessor</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>    <span class="k">if</span> <span class="s2">&quot;product&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">eia_json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="n">accessor</span> <span class="o">=</span> <span class="s2">&quot;price&quot;</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>    <span class="n">result_dict</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>        <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;period&quot;</span><span class="p">]:</span> <span class="n">entry</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">accessor</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">eia_json</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">][</span><span class="s2">&quot;data&quot;</span><span class="p">]</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>    <span class="p">}</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>    <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">energy_type</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="n">result_dict</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">state</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="k">return</span> <span class="n">result_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.price_per_mbtu_with_efficiency" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">price_per_mbtu_with_efficiency</span><span class="p">(</span><span class="n">energy_price_dict</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Convert an energy source's price per quantity into price per BTU with an efficiency.</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Efficiency data taken from https://portfoliomanager.energystar.gov/pdf/reference/Thermal%20Conversions.pdf</p>
</details>
<details class="see-also" open>
  <summary>See also</summary>
  <p><code>EIADataRetriever.HeaterEfficiencies</code></p>
</details>


  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>energy_price_dict</code></td>
          <td>
                <code>dict</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>energy source json</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>dict</code></td>          <td>
                <code>dict[str, str | <span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span> | float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>new dictionary with btu centric pricing</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="k">def</span> <span class="nf">price_per_mbtu_with_efficiency</span><span class="p">(</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">energy_price_dict</span><span class="p">:</span> <span class="nb">dict</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert an energy source&#39;s price per quantity into price per BTU with an efficiency.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        Efficiency data taken from https://portfoliomanager.energystar.gov/pdf/reference/Thermal%20Conversions.pdf</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    See also:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">        `EIADataRetriever.HeaterEfficiencies`</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">        energy_price_dict (dict): energy source json</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        dict: new dictionary with btu centric pricing</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span class="c1">#! make new function based on burner type/ end usage type</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>    <span class="n">CENTS_IN_DOLLAR</span> <span class="o">=</span> <span class="mi">100</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="k">match</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">):</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">PROPANE</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>            <span class="c1"># for loop is done for every case since i dont want to use `eval` or parse a string of division to keep PEMDAS. this is why i dont have an efficiency func yet</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>                    <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>                    <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>                <span class="p">):</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>                <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>                    <span class="n">value</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>                    <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">PROPANE_BTU_PER_GAL</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">PROPANE_FURNACE</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>                    <span class="p">)</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>                    <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>                <span class="p">)</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">NATURAL_GAS</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>                    <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>                    <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>                <span class="p">):</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>                <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>                    <span class="n">value</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>                    <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">NG_BTU_PER_MCT</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">NG_FURNACE</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>                    <span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>                    <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>                <span class="p">)</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">ELECTRICITY</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>                    <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>                    <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>                <span class="p">):</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>                <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>                    <span class="n">value</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>                    <span class="o">/</span> <span class="n">CENTS_IN_DOLLAR</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>                    <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">ELECTRICITY_BTU_PER_KWH</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">HEAT_PUMP_DUCTED</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>                    <span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>                    <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>                <span class="p">)</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="k">case</span> <span class="bp">self</span><span class="o">.</span><span class="n">EnergyType</span><span class="o">.</span><span class="n">HEATING_OIL</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>                    <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>                    <span class="ow">or</span> <span class="n">energy_price_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>                <span class="p">):</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>                <span class="n">energy_price_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>                    <span class="n">value</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>                    <span class="o">/</span> <span class="p">(</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">FuelBTUConversion</span><span class="o">.</span><span class="n">HEATING_OIL_BTU_PER_GAL</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>                        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">HeaterEfficiencies</span><span class="o">.</span><span class="n">OIL_BOILER</span><span class="o">.</span><span class="n">value</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>                    <span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>                    <span class="o">*</span> <span class="mi">1_000</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>                <span class="p">)</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>            <span class="n">log</span><span class="p">(</span><span class="s2">&quot;Could not translate dict to btu per price.&quot;</span><span class="p">,</span> <span class="s2">&quot;warn&quot;</span><span class="p">)</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="k">return</span> <span class="n">energy_price_dict</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="backend.secondarydata.EIADataRetriever.price_to_clean_dict" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">price_to_clean_dict</span><span class="p">(</span><span class="n">price_struct</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Handle the different data types that EIA data could be stored in.</p>



  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>price_struct</code></td>
          <td>
                <code>dict | <span title="polars.DataFrame">DataFrame</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>a data structure containing the year, month, and price info</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>energy_type</code></td>
          <td>
                <code><span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span></code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the energy type</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>state</code></td>
          <td>
                <code>str</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>the state</p>
            </div>
          </td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>TypeError</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>raised if the type of <code>price_struct</code> is not supported</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>



  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>dict[str, str | <span title="backend.secondarydata.EIADataRetriever.EnergyType">EnergyType</span> | float]</code>
          </td>
          <td>
            <div class="doc-md-description">
              <p>dict[str, str|EnergyType|float]: the normalized and structured data in dict form</p>
            </div>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>src\backend\secondarydata.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="k">def</span> <span class="nf">price_to_clean_dict</span><span class="p">(</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>    <span class="bp">self</span><span class="p">,</span> <span class="n">price_struct</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">|</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">:</span> <span class="n">EnergyType</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">EnergyType</span> <span class="o">|</span> <span class="nb">float</span><span class="p">]:</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Handle the different data types that EIA data could be stored in.</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">        price_struct (dict | pl.DataFrame): a data structure containing the year, month, and price info</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">        energy_type (EnergyType): the energy type</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">        state (str): the state</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a><span class="sd">        TypeError: raised if the type of `price_struct` is not supported</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="sd">        dict[str, str|EnergyType|float]: the normalized and structured data in dict form</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>    <span class="k">match</span> <span class="n">price_struct</span><span class="p">:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>        <span class="k">case</span> <span class="nb">dict</span><span class="p">():</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_dict_to_clean_dict</span><span class="p">(</span><span class="n">price_struct</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>        <span class="k">case</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">():</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">price_df_to_clean_dict</span><span class="p">(</span><span class="n">price_struct</span><span class="p">,</span> <span class="n">energy_type</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Type not supported: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">energy_type</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2023 <a href="https://github.com/orgs/Atlas-B2023/repositories"  target="_blank" rel="noopener">WPI Atlas B23</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/orgs/Atlas-B2023/repositories" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tracking", "navigation.top", "toc.integrate", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>